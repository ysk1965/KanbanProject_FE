# 팀 칸반보드 - 기획서 v5.0

## 1. 서비스 개요

### 1.1 프로젝트 목적
서비스 이름 : BRIDGE (복잡한 협업을 단순한 흐름으로. 팀원들의 시간을 가장 가치 있게 연결합니다.)
소규모 팀(5~15명)이 **Feature 단위**로 업무를 관리하고, 자유로운 워크플로우를 구성할 수 있는 **칸반보드 웹 애플리케이션**

핵심 3요소
명확한 마일스톤과 피쳐 관리
효율적인 칸반 보드, 간트 차트 시스템
실시간 협업 및 일정 관리

### 1.2 핵심 컨셉

| 컨셉 | 설명 |
|------|------|
| **고정 블록 3개** | Feature, Task, Done (삭제/수정 불가) |
| **커스텀 블록** | 팀 상황에 맞게 Task와 Done 사이에 자유롭게 추가 |
| **Feature-Task 연동** | Feature 내 서브태스크 추가 시 Task 블록에 카드 자동 생성 |
| **완료 추적** | Task가 Done 블록으로 이동하면 Feature 진행률 자동 반영 |
| **팀 협업** | 보드에 멤버 초대 및 역할 기반 권한 관리 |
| **태그 시스템** | Feature/Task에 태그 부여하여 분류 및 필터링 |
| **체크리스트** | Task 내부에 세부 항목 관리 |
| **마일스톤** | Feature들을 마일스톤 단위로 그룹화하여 기간별 관리 (v5.0) |
| **데일리 스케줄** | 구성원별 시간/블록 기반 업무 배치 및 관리 |
| **위클리 스케줄** | Task 기간을 Gantt 차트 형태로 시각화 및 조정 (v5.0) |

### 1.3 서비스 구조

```
┌─────────────────────────────────────────────────────────────────────┐
│                           사용자 (User)                              │
│  - 이메일/소셜 로그인                                                 │
│  - 여러 보드 소유 또는 참여 가능                                       │
└───────────────────────────────┬─────────────────────────────────────┘
                                │
                    ┌───────────▼───────────┐
                    │       보드 (Board)      │
                    │  - 팀 단위 작업 공간     │
                    │  - 구독/결제 단위        │
                    │  - 스케줄 표시 모드 설정  │
                    └───────────┬───────────┘
                                │
        ┌───────────────────────┼───────────────────────┐
        │                       │                       │
┌───────▼───────┐       ┌───────▼───────┐       ┌───────▼───────┐
│  블록 (Block)   │       │ 멤버 (Member) │       │  태그 (Tag)    │
│  - 고정 3개     │       │  - 역할 기반   │       │  - 분류 용도   │
│  - 커스텀 추가  │       │  - 권한 관리   │       │  - 필터링      │
└───────┬───────┘       └───────────────┘       └───────────────┘
        │
        │               ┌───────────────┐
        │               │Milestone (v5.0)│  ← 보드 내 마일스톤
        │               │  - 기간 설정   │
        │               │  - Feature 그룹│
        │               └───────┬───────┘
        │                       │
┌───────▼───────┐               │
│ Feature (카드) │ ◄─────────────┘  ← 마일스톤과 다대다 연결
│  - 업무 단위    │
│  - 진행률 추적  │
└───────┬───────┘
        │
┌───────▼───────┐
│  Task (카드)   │  ← Feature의 서브태스크로만 생성
│  - 세부 작업    │
│  - 시작일/마감일│  ← v5.0: start_date 추가
│  - 블록 간 이동 │
└───────┬───────┘
        │
┌───────▼───────┐
│  Checklist    │  ← Task 내 세부 항목
│  - 체크 항목   │
│  - 담당자/일정 │
└───────┬───────┘
        │
┌───────▼───────┐
│ Schedule Block │  ← 데일리 스케줄 타임블록
│  - 시간/블록    │
│  - 배치        │
└───────────────┘
```

---

## 2. 비즈니스 모델

### 2.1 요금 정책

| 정책 | 내용 |
|------|------|
| 회원가입 | 무료 |
| 보드 생성 | 무료 |
| 무료 체험 | 보드 생성 후 7일간 전체 기능 |
| 과금 기준 | **구성원 수** (Owner + Admin + Member, Viewer 제외) |
| 결제 주체 | **Owner, Admin만** 결제 가능 |

### 2.2 요금표

| 구성원 수 | 월 결제 | 연 결제 (월 환산) | 할인율 |
|----------|---------|------------------|-------|
| 1~3명 | 무료 | 무료 | - |
| 4~10명 | ₩29,000 | ₩24,000 (₩290,000/년) | 17% |
| 11~25명 | ₩69,000 | ₩55,000 (₩660,000/년) | 20% |
| 26~50명 | ₩129,000 | ₩99,000 (₩1,190,000/년) | 23% |
| 51명+ | 문의 | 협의 | - |

### 2.3 보드 상태 흐름

```
보드 생성 → Trial (7일) → Grace (3일) → Active 또는 Suspended
```

| 상태 | 기간 | 기능 |
|------|------|------|
| Trial | 7일 | 전체 기능 |
| Grace | 3일 | 전체 기능 + 결제 유도 |
| Active | 구독 중 | 전체 기능 |
| Suspended | 미결제 | 읽기 전용 (30일 후 삭제) |

---

## 3. 회원 및 권한 시스템

### 3.1 회원 가입/로그인

- 이메일 + 비밀번호
- 소셜 로그인 (Google, GitHub)
- 프로필: 이미지, 이름, 이메일
- 내 보드 목록, 즐겨찾기 보드

### 3.2 보드 역할 (Role)

| 역할 | 설명 | 과금 |
|------|------|:----:|
| **Owner** | 보드 생성자, 최고 권한 | O |
| **Admin** | 관리자 권한 | O |
| **Member** | 카드 작업 가능 | O |
| **Viewer** | 읽기 전용 | X |

### 3.3 역할별 권한

| 기능 | Owner | Admin | Member | Viewer |
|------|:-----:|:-----:|:------:|:------:|
| 보드 삭제 | O | X | X | X |
| 보드 설정 | O | O | X | X |
| 멤버 초대/관리 | O | O | X | X |
| 블록 관리 | O | O | X | X |
| 마일스톤 관리 | O | O | X | X |
| Feature/Task 작업 | O | O | O | X |
| 태그 생성/삭제 | O | O | X | X |
| 스케줄 설정 | O | O | X | X |
| 내 스케줄 배치 | O | O | O | X |
| 타인 스케줄 배치 | O | O | X | X |
| 조회 | O | O | O | O |

### 3.4 멤버 초대

- **이메일 초대**: 역할 지정 가능
- **초대 링크**: 만료 기간, 사용 횟수 설정 가능

---

## 4. 블록 시스템

### 4.1 블록 타입

| 구분 | 블록 | 삭제 | 이름변경 | 위치 |
|------|------|:----:|:-------:|------|
| 고정 | **Feature** | X | X | 첫째 |
| 고정 | **Task** | X | X | 둘째 |
| 고정 | **Done** | X | X | 마지막 |
| 커스텀 | (자유) | O | O | Task~Done 사이 |

### 4.2 블록 배치

```
┌─────────┬─────────┬─────────────────────────────┬─────────┐
│ Feature │  Task   │      커스텀 블록 영역        │  Done   │
│ (고정)  │ (고정)  │    [In Progress] [Review]   │ (고정)  │
└─────────┴─────────┴─────────────────────────────┴─────────┘
```

---

## 5. 카드 시스템

### 5.1 계층 구조

```
Feature (피쳐 카드)
    │
    ├── 제목, 설명, 담당자, 우선순위, 마감일, 태그
    ├── 진행률 (완료 Task / 전체 Task)
    │
    └── Task (태스크 카드)
            │
            ├── 제목, 설명, 담당자, 시작일, 마감일, 태그
            ├── 현재 블록 위치
            │
            └── Checklist (체크리스트)
                    │
                    ├── 항목명, 담당자
                    ├── 시작일, 마감일, 완료일
                    ├── 완료 여부
                    │
                    └── Schedule Block (타임블록)
                            │
                            ├── 날짜, 시작시간, 종료시간
                            └── 담당자
```

### 5.2 카드 생성 규칙

| 카드 | 생성 위치 | 생성 방법 |
|------|----------|----------|
| Feature | Feature 블록 | [+ Feature] 버튼 |
| Task | Task 블록 (자동) | Feature 상세 → 서브태스크 추가 |
| Checklist | Task 내부 | Task 상세 → 체크리스트 추가 |
| Schedule Block | 데일리 스케줄 | 시간 영역 드래그 |

### 5.3 카드 이동

- Feature: 이동 불가 (고정)
- Task: Task ↔ 커스텀 ↔ Done 자유롭게 이동
- Done 이동 시 Feature 진행률 자동 업데이트

### 5.4 Task 날짜 필드 (v5.0 확장)

| 필드 | 설명 | 용도 |
|------|------|------|
| **start_date** | 시작일 (v5.0 신규) | 주간 스케줄에서 Task 기간 표시 |
| **due_date** | 마감일 | 마감 관리, 상태 색상 결정 |

- start_date와 due_date로 Task의 **기간**을 표현
- 주간 스케줄 뷰에서 Gantt 바 형태로 시각화
- 드래그로 날짜 조정 가능

---

## 6. 마일스톤 시스템 (v5.0 신규)

### 6.1 개요

마일스톤은 보드 내 Feature들을 **기간 단위로 그룹화**하여 관리하는 기능

### 6.2 마일스톤 구조

```
Milestone
├── id
├── title (제목)
├── description (설명, 선택)
├── start_date (시작일)
├── end_date (종료일)
├── features (연결된 Feature 목록)
├── feature_count (연결된 Feature 수)
├── progress_percentage (진행도)
├── created_by (생성자)
└── created_at (생성일)
```

### 6.3 Feature 연결

- 하나의 Feature는 **여러 마일스톤**에 포함될 수 있음 (다대다)
- 마일스톤 생성/수정 시 Feature 선택
- 마일스톤 선택 시 해당 Feature와 Task만 필터링 표시

### 6.4 진행도 계산

```
진행도 = (연결된 Feature들의 완료 Task 합계 / 전체 Task 합계) × 100
```

### 6.5 마일스톤 모달

```
┌────────────────────────────────────────────────────────┐
│  마일스톤 추가                                       [X] │
├────────────────────────────────────────────────────────┤
│  제목 *                                                │
│  ┌──────────────────────────────────────────────────┐  │
│  │ Sprint 1                                         │  │
│  └──────────────────────────────────────────────────┘  │
├────────────────────────────────────────────────────────┤
│  설명                                                  │
│  ┌──────────────────────────────────────────────────┐  │
│  │ 로그인 및 회원가입 기능 구현                       │  │
│  └──────────────────────────────────────────────────┘  │
├────────────────────────────────────────────────────────┤
│  기간 *                                                │
│  ┌────────────────┐    ┌────────────────┐             │
│  │ 2026-01-06     │ ~  │ 2026-01-19     │             │
│  └────────────────┘    └────────────────┘             │
├────────────────────────────────────────────────────────┤
│  Feature 선택                                          │
│  ┌──────────────────────────────────────────────────┐  │
│  │ [v] 사용자 인증 시스템                            │  │
│  │ [v] 대시보드 UI                                   │  │
│  │ [ ] 스케줄 관리                                   │  │
│  │ [ ] 알림 기능                                     │  │
│  └──────────────────────────────────────────────────┘  │
├────────────────────────────────────────────────────────┤
│           [취소]                  [생성]               │
└────────────────────────────────────────────────────────┘
```

### 6.6 마일스톤 필터링

- 보드 상단에서 마일스톤 선택 드롭다운
- "전체" 선택 시 모든 Feature/Task 표시
- 특정 마일스톤 선택 시:
  - 해당 마일스톤에 연결된 Feature만 표시
  - 해당 Feature의 Task만 표시
  - 주간 스케줄의 날짜 범위 자동 설정

---

## 7. 위클리 스케줄 시스템 (v5.0 신규)

### 7.1 개요

Task의 시작일~마감일을 **Gantt 차트** 형태로 시각화하고, 드래그로 날짜를 조정하는 뷰

### 7.2 뷰 구성

```
┌─────────────────────────────────────────────────────────────────────────┐
│  [일][주]  [달력] 2026.01.05 ~ 2026.02.04  (31일)  [오늘]               │
│                                                    상태 범례: ● ● ● ● ● │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  Feature / Task      │  1/5  1/6  1/7  1/8  1/9  1/10 1/11 1/12 ...    │
│  ════════════════════════════════════════════════════════════════════   │
│                      │                                                  │
│  v ● 사용자 인증     │  ┌─────────────────────────────────────┐        │
│      시스템    0/3   │  │ ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░ │        │
│                      │  └─────────────────────────────────────┘        │
│    □ 로그인 API      │       ┌══════════════════════════════════┐      │
│      @Admin          │       │ 로그인 API 개발              ◐ │      │
│                      │       └══════════════════════════════════┘      │
│    □ 회원가입 폼     │            ┌═══════════════┐                    │
│      @김철수         │            │ 회원...    ◐ │                    │
│                      │            └═══════════════┘                    │
│    □ OAuth 설정      │                 ┌═══════════┐                   │
│      @Admin          │                 │ OAut.. ◐ │                   │
│                      │                 └═══════════┘                   │
│                      │                                                  │
│  > ● 대시보드 UI     │           ┌────────────────────┐                │
│                 0/2  │           │ ░░░░░░░░░░░░░░░░░░ │                │
│                      │           └────────────────────┘                │
│                                                                         │
│  ════════════════════════════════════════════════════════════════════   │
│                              │ (오늘 표시선)                            │
└─────────────────────────────────────────────────────────────────────────┘
```

### 7.3 핵심 기능

| 기능 | 설명 |
|------|------|
| **일/주 토글** | 일 단위(60px/일) ↔ 주 단위(80px/주) 전환 |
| **날짜 범위 선택** | 시작일~종료일 직접 지정 |
| **오늘 버튼** | 오늘 위치로 스크롤 이동 |
| **Feature 접기/펼치기** | Feature 클릭으로 하위 Task 토글 |
| **Task 바 리사이즈** | 좌우 핸들 드래그로 시작일/마감일 조정 |
| **Task 바 이동** | 롱프레스(0.3초) 후 드래그로 전체 기간 이동 |
| **마일스톤 필터** | 선택한 마일스톤의 Feature/Task만 표시 |
| **체크리스트 게이지** | Task 바에 원형 진행률 표시 |

### 7.4 Task 상태별 색상

| 상태 | 색상 | 조건 |
|------|------|------|
| 완료 | 초록색 | task.completed = true |
| 마감 초과 | 빨간색 | due_date < today & 미완료 |
| 마감 임박 | 주황색 | due_date = today 또는 tomorrow |
| 진행 중 | 파란색 | start_date ≤ today ≤ due_date |
| 진행 전 | 회색 | start_date > today |

### 7.5 일/주 토글 동작

#### 일 단위 모드
- 각 열이 하루(60px)
- Task 바 드래그로 날짜 조정 가능
- 요일 + 날짜 표시 (월, 1/6)

#### 주 단위 모드
- 각 열이 일주일(80px)
- 월~일을 한 컬럼으로 표시
- Task 바는 해당 주에 걸쳐 표시
- **드래그/리사이즈 비활성화** (조회 전용)
- 헤더: 시작일~종료일 (1/6 ~1/12)

### 7.6 Task 날짜 조정

#### 리사이즈 (시작일/마감일 개별 조정)
```
1. Task 바에 마우스 호버
2. 좌측/우측 핸들 표시
3. 핸들 드래그로 날짜 조정
4. 드롭 시 API 호출 (updateTaskDates)
```

#### 이동 (전체 기간 유지하며 이동)
```
1. Task 바를 0.3초 이상 길게 누름 (롱프레스)
2. 바가 이동 모드로 전환 (커서 변경)
3. 좌우로 드래그하여 이동
4. 드롭 시 API 호출 (start_date, due_date 모두 변경)
```

### 7.7 Feature 집계 바

- Feature 행에 회색 바로 Task 기간 집계 표시
- 가장 빠른 Task 시작일 ~ 가장 늦은 Task 마감일
- 내부에 진행률 바 (초록색)

---

## 8. 데일리 스케줄 시스템

### 8.1 개요

구성원별로 하루 근무시간을 시각화하고, Checklist 단위로 업무를 시간/블록에 배치

### 8.2 표시 모드

보드별로 스케줄 표시 방식 선택 가능 (설정에서 변경)

| 모드 | 설명 | 표시 예시 |
|------|------|----------|
| **시간 기준** | 시작/종료 시간으로 관리 | 09:00 ~ 18:00 |
| **블록 기준** | 블록 개수로 관리 | 1번 ~ 16번 블록 |

#### 시간 기준 모드
```
시간      김개발          이디자인
════════════════════════════════════
09:00  ┌───────────┐
       │ 로그인 API │   ┌───────────┐
09:30  │ 개발       │   │ 메인 화면 │
       │            │   │ 디자인    │
10:00  │            │   │           │
       └───────────┘   └───────────┘
```

#### 블록 기준 모드
```
블록      김개발          이디자인
════════════════════════════════════
  1    ┌───────────┐
       │ 로그인 API │   ┌───────────┐
  2    │ 개발       │   │ 메인 화면 │
       │            │   │ 디자인    │
  3    │            │   │           │
       └───────────┘   └───────────┘
```

### 8.3 일/주 토글 (v5.0 신규)

| 모드 | 설명 |
|------|------|
| **일 단위** | 단일 날짜의 시간 일정표 |
| **주 단위** | 월~일 7일간의 일정을 한 화면에 표시 |

#### 주 단위 모드 레이아웃
```
┌─────────────────────────────────────────────────────────────────────────┐
│  [일][주]     < 1월 6일 - 1월 12일 >    [오늘]                           │
├─────────────────────────────────────────────────────────────────────────┤
│  시간    │  월(6)  │  화(7)  │  수(8)  │  목(9)  │  금(10) │  토(11) │  일(12) │
│  ════════════════════════════════════════════════════════════════════   │
│  09:00   │ ┌────┐ │        │ ┌────┐ │        │        │        │        │
│          │ │API │ │        │ │UI  │ │        │        │        │        │
│  09:30   │ │개발│ │        │ │작업│ │        │        │        │        │
│          │ └────┘ │        │ └────┘ │        │        │        │        │
│  10:00   │        │ ┌────┐ │        │        │        │        │        │
│          │        │ │테스트│ │        │        │        │        │        │
└─────────────────────────────────────────────────────────────────────────┘
```

### 8.4 핵심 기능

| 기능 | 설명 |
|------|------|
| **세로 드래그 생성** | 빈 영역을 세로로 드래그하여 타임블록 생성 |
| **리사이즈** | 블록 상/하단 핸들로 시작/종료 시간 조절 |
| **롱프레스 드래그 이동** | 블록 길게 누른 후 상/하 이동 |
| **중복 감지** | 이동 시 다른 블록과 겹치면 빨간색 경고 표시 |
| **계층 연결** | Time Block → Checklist → Task → Feature |
| **상세 패널** | 블록 클릭 시 연결된 Checklist, Task, Feature + Task 전체 체크리스트 표시 |

### 8.5 UI 레이아웃

```
┌─────────────────────────────────────────────────────────────────────────┐
│  [일][주]   데일리 스케줄             < 2026-01-12 (월) >   [오늘] [설정]  │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  블록     김개발          이디자인         박기획          최QA          │
│  ════════════════════════════════════════════════════════════════════   │
│                                                                         │
│   1    ┌───────────┐                                                    │
│        │ 로그인 API │   ┌───────────┐                    ┌───────────┐  │
│   2    │ 개발       │   │ 메인 화면 │                    │ 테스트    │  │
│        │            │   │ 디자인    │   ┌───────────┐   │ 케이스    │  │
│   3    │ ═══════════│   │           │   │ 기획서    │   │ 작성      │  │
│        │ 백엔드 인증 │   │ ═══════════│   │ 검토      │   └─────●────┘  │
│   4    │ 로그인 기능 │   │ UI작업    │   │           │         ↑       │
│        │            │   │ 로그인    │   │ ═══════════│   리사이즈 핸들  │
│   5    │            │   │ 기능      │   │ 문서 작성  │                  │
│        │            │   └─────●────┘   │ 로그인    │                  │
│   6    └─────●──────┘         ↑        └───────────┘                   │
│              ↑            리사이즈                                       │
│         리사이즈                                                         │
│                                                                         │
│  ════════════════════════════════════════════════════════════════════   │
│  빈 영역을 세로로 드래그하여 새 타임블록을 생성하세요                      │
└─────────────────────────────────────────────────────────────────────────┘
```

### 8.6 타임블록 생성 모달

세로 드래그 후 통합 모달 표시:

```
┌────────────────────────────────────────────────────────┐
│  타임블록 추가                                      [X] │
├────────────────────────────────────────────────────────┤
│  ┌──────────────────────────────────────────────────┐  │
│  │  [블록] 3번 ~ 5번 블록                            │  │ ← 블록 모드
│  │  [시간] 10:00 - 11:30                            │  │ ← 시간 모드
│  └──────────────────────────────────────────────────┘  │
├────────────────────────────────────────────────────────┤
│  [폴더] Feature                                        │
│  ┌──────────────────────────────────────────────────┐  │
│  │ Select a feature                              [v] │  │
│  └──────────────────────────────────────────────────┘  │
├────────────────────────────────────────────────────────┤
│  [문서] Task                                           │
│  ┌──────────────────────────────────────────────────┐  │
│  │ Select a task                                 [v] │  │
│  └──────────────────────────────────────────────────┘  │
├────────────────────────────────────────────────────────┤
│  [체크] 기존 체크리스트에서 선택           클릭하여 선택 │
│  ┌──────────────────────────────────────────────────┐  │
│  │ [ ] 로그인 API 개발 - 세부작업 1              선택 │  │
│  │ [ ] 로그인 API 개발 - 세부작업 2              선택 │  │
│  │ [ ] 로그인 API 개발 - 세부작업 3              선택 │  │
│  └──────────────────────────────────────────────────┘  │
├────────────────────────────────────────────────────────┤
│  ─────────────── 또는 새로 생성 ────────────────────    │
├────────────────────────────────────────────────────────┤
│  새 체크리스트 항목                                     │
│  ┌──────────────────────────────────────────────────┐  │
│  │ 새 체크리스트 제목 입력                           │  │
│  └──────────────────────────────────────────────────┘  │
├────────────────────────────────────────────────────────┤
│           [Cancel]              [Create]               │
└────────────────────────────────────────────────────────┘
```

### 8.7 타임블록 상세 패널

```
┌─────────────────────────────────────┐
│  타임블록 상세                   [X] │
├─────────────────────────────────────┤
│  ┌─────────────────────────────────┐│
│  │ [블록] 1번 ~ 9번 블록  (9블록)  ││ ← 블록 모드
│  │ [시간] 09:00 - 13:30 (4시간30분)││ ← 시간 모드
│  │ [달력] 2026년 1월 12일          ││
│  └─────────────────────────────────┘│
├─────────────────────────────────────┤
│  [폴더] FEATURE        클릭하여 상세│
│  ● 사용자 인증 시스템               │
├─────────────────────────────────────┤
│  [문서] TASK           클릭하여 상세│
│  로그인 API 개발                    │
├─────────────────────────────────────┤
│  [체크] TASK 체크리스트      1/3 완료│
│  ┌─────────────────────────────────┐│
│  │ [v] 로그인 API 개발 - 세부작업1 ││
│  │ [ ] 로그인 API 개발 - 세부작업2 ││ ← (현재) 표시
│  │ [ ] 로그인 API 개발 - 세부작업3 ││
│  └─────────────────────────────────┘│
├─────────────────────────────────────┤
│  [휴지통] 타임블록 삭제              │
└─────────────────────────────────────┘
```

### 8.8 타임블록 리사이즈

```
상단 핸들 드래그 → 시작시간/시작블록 조절
하단 핸들 드래그 → 종료시간/종료블록 조절
- 30분/1블록 단위 스냅
- 최소 30분/1블록 제한
- 드래그 중 툴팁 표시
```

### 8.9 타임블록 이동

```
1. 블록을 0.5초 이상 길게 누름 (롱프레스)
2. 블록이 이동 모드로 전환 (파란색 테두리)
3. 상하로 드래그하여 이동
4. 다른 블록과 겹치면 빨간색으로 변경 + "이동 불가" 표시
5. 드롭 시 겹침 없으면 이동 완료, 겹치면 원위치
```

### 8.10 블록 색상

| 상태 | 색상 | 조건 |
|------|------|------|
| 기본 | 파란색 | Checklist 미완료 |
| 완료 | 초록색 | Checklist 완료 |
| 마감 임박 | 주황색 | due_date가 오늘/내일 |
| 마감 초과 | 빨간색 | due_date 지남 & 미완료 |
| 미연결 | 회색 | Checklist 연결 없음 |
| 이동 불가 | 빨간색 | 이동 중 다른 블록과 겹침 |

### 8.11 스케줄 설정 모달

```
┌────────────────────────────────────────────────────────┐
│  스케줄 설정                                        [X] │
├────────────────────────────────────────────────────────┤
│  관리 방식                                             │
│  ┌────────────────────┐  ┌────────────────────┐       │
│  │ [시계] 시간 기준    │  │ [블록] 블록 기준    │       │
│  │ 시작/종료 시간 설정 │  │ 블록 개수로 설정   │       │
│  └────────────────────┘  └────────────────────┘       │
├────────────────────────────────────────────────────────┤
│                                                        │
│  [시간 모드일 때]                                       │
│  시작 시간: [09:00 v]                                  │
│  종료 시간: [18:00 v]                                  │
│                                                        │
│  [블록 모드일 때]                                       │
│  블록 개수: [16개 v] (8.0시간)                         │
│                                                        │
├────────────────────────────────────────────────────────┤
│  설정 미리보기                                         │
│  ┌──────────────────────────────────────────────────┐  │
│  │ [시간] 근무 시간: 09:00 ~ 18:00                  │  │
│  │       총 시간: 9.0시간 | 블록 수: 18개           │  │
│  │                                                  │  │
│  │ [블록] 총 블록 수: 16개                          │  │
│  └──────────────────────────────────────────────────┘  │
├────────────────────────────────────────────────────────┤
│           [취소]                  [저장]               │
└────────────────────────────────────────────────────────┘
```

---

## 9. 태그 시스템

- 보드별 태그 관리
- Feature, Task에 다중 태그 부여
- 색상 지정 가능
- 태그 기반 필터링/검색

---

## 10. UI 레이아웃

### 10.1 메인 보드 (칸반 뷰)

```
┌─────────────────────────────────────────────────────────────────────────┐
│  팀 칸반보드     [칸반보드] [위클리스케줄] [데일리스케줄]  [필터] [팀원] [설정]  │
│                 [마일스톤: Sprint 1 v]                                    │
├───────────┬───────────┬───────────┬───────────┬───────────┬─────────────┤
│  Feature  │   Task    │In Progress│  Review   │    QA     │    Done     │
├───────────┼───────────┼───────────┼───────────┼───────────┼─────────────┤
│┌─────────┐│┌─────────┐│┌─────────┐│┌─────────┐│           │┌───────────┐│
││ 로그인   ││ DB설계   ││ API개발  ││ UI검토   ││           ││ 로그인 UI ││
││ ███░ 3/4││← 로그인  ││← 로그인  ││← 로그인  ││           │└───────────┘│
││ #인증    ││          ││          ││          ││           │             │
│└─────────┘│└─────────┘│└─────────┘│└─────────┘│           │             │
│[+Feature] │  (자동)   │    [+]    │    [+]    │    [+]    │             │
└───────────┴───────────┴───────────┴───────────┴───────────┴─────────────┘
```

### 10.2 Feature 상세 모달

```
┌────────────────────────────────────────────────────┐
│ 로그인 기능 구현                                [X] │
├────────────────────────────────────────────────────┤
│ 설명: 소셜 로그인 포함 로그인 기능 개발             │
│ 담당: @김PM  |  우선순위: High  |  마감: 01/15     │
│ 태그: #인증 #MVP                                   │
├────────────────────────────────────────────────────┤
│ 서브태스크                                 3/4 완료 │
│ ┌──────────────────────────────────────────────┐  │
│ │ [v] 로그인 UI 디자인        @이디자인  → Done │  │
│ │ [v] 로그인 API 개발         @박개발    → Done │  │
│ │ [v] 소셜 로그인 연동        @박개발    → Done │  │
│ │ [ ] 로그인 테스트          @최QA   → Review  │  │
│ └──────────────────────────────────────────────┘  │
│ [+ 서브태스크 추가]                                │
└────────────────────────────────────────────────────┘
```

### 10.3 Task 상세 모달

```
┌────────────────────────────────────────────────────┐
│ 로그인 API 개발                                 [X] │
├────────────────────────────────────────────────────┤
│ Feature: 로그인 기능 구현                          │
│ 현재 위치: In Progress                             │
│ 담당: @박개발                                      │
│ 시작일: 01/06  |  마감일: 01/12                    │  ← v5.0 확장
│ 태그: #백엔드 #API                                 │
├────────────────────────────────────────────────────┤
│ 체크리스트                                   2/4   │
│ ┌──────────────────────────────────────────────┐  │
│ │ [v] JWT 토큰 발급 구현                        │  │
│ │ [v] 리프레시 토큰 구현                        │  │
│ │ [ ] 소셜 로그인 연동       @박개발  01/11     │  │
│ │ [ ] API 테스트 작성        @박개발  01/12     │  │
│ └──────────────────────────────────────────────┘  │
│ [+ 항목 추가]                                      │
└────────────────────────────────────────────────────┘
```

---

## 11. 데이터 모델

### 11.1 주요 엔티티

| 엔티티 | 설명 |
|--------|------|
| **User** | 사용자 |
| **Board** | 보드 (스케줄 표시 모드, 선택 마일스톤 포함) |
| **BoardMember** | 보드 멤버 (역할 포함) |
| **Block** | 블록 (고정/커스텀) |
| **Milestone** | 마일스톤 (v5.0 신규) |
| **MilestoneFeature** | 마일스톤-Feature 연결 (v5.0 신규) |
| **Feature** | Feature 카드 |
| **Task** | Task 카드 (시작일 필드 추가) |
| **Checklist** | 체크리스트 항목 |
| **ScheduleBlock** | 타임블록 (데일리 스케줄) |
| **Tag** | 태그 |
| **InviteLink** | 초대 링크 |
| **Subscription** | 구독 |
| **ActivityLog** | 활동 로그 |

### 11.2 Board 엔티티 (v5.0 확장)

```
Board
├── id
├── name
├── description
├── work_hours_per_day (기본 8)
├── work_start_time (기본 09:00)
├── schedule_display_mode (TIME | BLOCK)
├── selected_milestone_id (v5.0 신규)  ← 현재 선택된 마일스톤
├── created_at
└── updated_at
```

### 11.3 Milestone 엔티티 (v5.0 신규)

```
Milestone
├── id
├── board_id (FK)
├── title
├── description
├── start_date
├── end_date
├── created_by (FK)
├── created_at
└── updated_at
```

### 11.4 MilestoneFeature 엔티티 (v5.0 신규)

```
MilestoneFeature
├── id
├── milestone_id (FK)
├── feature_id (FK)
└── created_at

UNIQUE(milestone_id, feature_id)
```

### 11.5 Task 엔티티 (v5.0 확장)

```
Task
├── id
├── feature_id (FK)
├── board_id (FK)
├── block_id (FK)
├── title
├── description
├── assignee_id (FK)
├── start_date (v5.0 신규)  ← 시작일
├── due_date              ← 마감일
├── estimated_minutes
├── is_completed
├── position
├── created_by (FK)
├── created_at
├── updated_at
└── completed_at
```

### 11.6 핵심 관계

```
User ─── Board ─── Block
           │         │
           │    Feature ◄──┐
           │         │     │
           │       Task    │
           │         │     │
           │    Checklist  │
           │         │     │
           │  ScheduleBlock│
           │               │
           ├─── Tag ───────┘
           │
           ├─── Milestone ──── MilestoneFeature ───► Feature
           │
           ├─── BoardMember
           ├─── InviteLink
           └─── Subscription
```

---

## 12. API 구조

| 그룹 | Base Path | 주요 기능 |
|------|-----------|----------|
| Auth | `/auth` | 로그인, 회원가입 |
| Users | `/users` | 내 정보, 프로필 |
| Boards | `/boards` | 보드 CRUD, 선택 마일스톤 |
| Blocks | `/boards/{id}/blocks` | 블록 관리 |
| Milestones | `/boards/{id}/milestones` | 마일스톤 CRUD (v5.0) |
| Features | `/boards/{id}/features` | Feature CRUD |
| Tasks | `/boards/{id}/tasks` | Task CRUD, 이동, 날짜 수정 |
| Checklists | `/boards/{id}/tasks/{taskId}/checklists` | 체크리스트 |
| Schedules | `/boards/{id}/schedules` | 데일리 스케줄 |
| Tags | `/boards/{id}/tags` | 태그 관리 |
| Members | `/boards/{id}/members` | 멤버 관리 |
| Subscription | `/boards/{id}/subscription` | 구독 관리 |

### 12.1 Milestone API (v5.0 신규)

| Method | Endpoint | 설명 |
|--------|----------|------|
| GET | `/milestones` | 마일스톤 목록 조회 |
| GET | `/milestones/{id}` | 마일스톤 상세 조회 |
| POST | `/milestones` | 마일스톤 생성 |
| PUT | `/milestones/{id}` | 마일스톤 수정 |
| DELETE | `/milestones/{id}` | 마일스톤 삭제 |
| POST | `/milestones/{id}/features` | Feature 연결 |
| DELETE | `/milestones/{id}/features/{featureId}` | Feature 연결 해제 |

### 12.2 Board API (v5.0 확장)

| Method | Endpoint | 설명 |
|--------|----------|------|
| PUT | `/boards/{id}/selected-milestone` | 선택 마일스톤 변경 |

### 12.3 Task API (v5.0 확장)

| Method | Endpoint | 설명 |
|--------|----------|------|
| GET | `/tasks` | Task 목록 (milestone_id 필터 지원) |
| PUT | `/tasks/{id}/dates` | Task 시작일/마감일 수정 |

### 12.4 Schedule API

| Method | Endpoint | 설명 |
|--------|----------|------|
| GET | `/schedules/daily` | 일별 스케줄 조회 |
| GET | `/schedules/settings` | 스케줄 설정 조회 |
| PUT | `/schedules/settings` | 스케줄 설정 수정 (표시 모드 포함) |
| POST | `/schedules/blocks` | 타임블록 생성 (기존 체크리스트) |
| POST | `/schedules/blocks/with-checklist` | 타임블록 생성 (새 체크리스트) |
| PUT | `/schedules/blocks/{id}` | 타임블록 수정 (시간/위치) |
| DELETE | `/schedules/blocks/{id}` | 타임블록 삭제 |

---

## 13. 핵심 규칙 요약

| 항목 | 규칙 |
|------|------|
| 고정 블록 | Feature, Task, Done (삭제/이름변경 불가) |
| Feature 생성 | Feature 블록에서만 |
| Task 생성 | Feature 서브태스크로만 |
| Checklist 생성 | Task 내부에서만 |
| Schedule Block 생성 | 데일리 스케줄에서 세로 드래그 |
| 완료 반영 | Done 이동 시 자동 |
| 역할 순서 | Owner > Admin > Member > Viewer |
| 과금 기준 | Owner + Admin + Member 수 |
| 스케줄 표시 | 시간 기준 또는 블록 기준 (보드별 설정) |
| 마일스톤 | Feature 그룹화, 기간별 필터링 (v5.0) |
| Task 기간 | start_date ~ due_date로 표현 (v5.0) |

---

## 14. 기술 스택

### Frontend
- React 18 + TypeScript + Vite
- Tailwind CSS + Radix UI
- HTML5 Drag & Drop API (칸반 드래그앤드롭)
- Context API (상태 관리)
- date-fns

### Backend
- Java 21 + Spring Boot 3.4
- Spring Security + JWT
- Spring Data JPA
- PostgreSQL

### Infrastructure
- AWS ECS Fargate + Aurora PostgreSQL
- CloudFront + S3 + Redis
- Terraform (IaC)

---

## 변경 이력

| 버전 | 날짜 | 주요 변경 |
|------|------|----------|
| v3.0 | 2025-01 | 데일리 스케줄 시스템 추가 |
| v4.0 | 2026-01 | 스케줄 블록/시간 표시 모드, 타임블록 이동, 중복 감지, 통합 체크리스트 모달 |
| v5.0 | 2026-01 | 마일스톤 시스템, 위클리 스케줄 뷰, 데일리 일/주 토글, Task 시작일 필드 |

---

**문서 버전**: 5.0
**최종 수정**: 2026년 1월 12일
