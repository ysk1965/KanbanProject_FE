# BRIDGE SPOTS- 기획서 v7.0

## 1. 서비스 개요

### 1.1 프로젝트 목적
**서비스 이름**: BRIDGE SPOTS
**슬로건**: "복잡한 협업을 단순한 흐름으로. 팀원들의 시간을 가장 가치 있게 연결합니다."

소규모 팀(5~15명)이 **Feature 단위**로 업무를 관리하고, 자유로운 워크플로우를 구성할 수 있는 **칸반보드 웹 애플리케이션**

**핵심 3요소**
- 명확한 마일스톤과 피쳐 관리
- 효율적인 칸반 보드, 간트 차트 시스템
- 실시간 협업 및 일정 관리

### 1.2 핵심 컨셉

| 컨셉 | 설명 |
|------|------|
| **고정 블록 3개** | Feature, Task, Done (삭제/수정 불가) |
| **커스텀 블록** | 팀 상황에 맞게 Task와 Done 사이에 자유롭게 추가 |
| **Feature-Task 연동** | Feature 내 서브태스크 추가 시 Task 블록에 카드 자동 생성 |
| **완료 추적** | Task가 Done 블록으로 이동하면 Feature 진행률 자동 반영 |
| **팀 협업** | 보드에 멤버 초대 및 역할 기반 권한 관리 |
| **태그 시스템** | Feature/Task에 태그 부여하여 분류 및 필터링 |
| **체크리스트** | Task 내부에 세부 항목 관리 |
| **마일스톤** | Feature들을 마일스톤 단위로 그룹화하여 기간별 관리 |
| **데일리 스케줄** | 구성원별 시간/블록 기반 업무 배치 및 관리 |
| **위클리 스케줄** | Task 기간을 Gantt 차트 형태로 시각화 및 조정 |
| **보드 티어** | Standard/Premium 보드 구분 |
| **관리 대시보드** | 마일스톤 건강도, 팀 생산성, 지연 항목 관리 (v7.0) |
| **마일스톤 할당** | 멤버별 마일스톤 작업 시간 할당 및 추적 (v7.0) |

### 1.3 서비스 구조

```
┌─────────────────────────────────────────────────────────────────────┐
│                           사용자 (User)                              │
│  - 이메일/소셜 로그인                                                 │
│  - 여러 보드 소유 또는 참여 가능                                       │
└───────────────────────────────┬─────────────────────────────────────┘
                                │
                    ┌───────────▼───────────┐
                    │       보드 (Board)      │
                    │  - 팀 단위 작업 공간     │
                    │  - Standard / Premium   │
                    │  - 스케줄 표시 모드 설정  │
                    │  - 관리 대시보드        │  ← v7.0: 관리 기능
                    └───────────┬───────────┘
                                │
        ┌───────────────────────┼───────────────────────┐
        │                       │                       │
┌───────▼───────┐       ┌───────▼───────┐       ┌───────▼───────┐
│  블록 (Block)   │       │ 멤버 (Member) │       │  태그 (Tag)    │
│  - 고정 3개     │       │  - 역할 기반   │       │  - 분류 용도   │
│  - 커스텀 추가  │       │  - 권한 관리   │       │  - 필터링      │
└───────┬───────┘       └───────────────┘       └───────────────┘
        │
        │               ┌───────────────┐       ┌───────────────┐
        │               │  Milestone    │──────►│  Allocation   │  ← v7.0
        │               │  - 기간 설정   │       │  - 멤버 할당   │
        │               │  - Feature 그룹│       │  - 시간 배정   │
        │               └───────┬───────┘       └───────────────┘
        │                       │
┌───────▼───────┐               │
│ Feature (카드) │ ◄─────────────┘  ← 마일스톤과 다대다 연결
│  - 업무 단위    │
│  - 진행률 추적  │
└───────┬───────┘
        │
┌───────▼───────┐
│  Task (카드)   │  ← Feature의 서브태스크로만 생성
│  - 세부 작업    │
│  - 시작일/마감일│
│  - 예상 시간    │  ← v7.0: 시간 기반 추적
│  - 블록 간 이동 │
└───────┬───────┘
        │
┌───────▼───────┐
│  Checklist    │  ← Task 내 세부 항목
│  - 체크 항목   │
│  - 담당자/일정 │  ← 담당자 기준 Task 소속
└───────┬───────┘
        │
┌───────▼───────┐
│ Schedule Block │  ← 데일리 스케줄 타임블록
│  - 시간/블록    │
│  - 배치        │
└───────────────┘
```

---

## 2. 비즈니스 모델

### 2.1 핵심 과금 원칙

| 항목 | 내용 |
|------|------|
| **과금 단위** | 시트(Seat) 기반 - 보드별 유료 멤버 수 |
| **유료 대상** | Owner + Admin + Member (Viewer 제외) |
| **보드 티어** | Standard (무료) / Premium (유료) |
| **결제 주체** | Owner, Admin만 결제 가능 |

### 2.2 요금표 (Seat 기반)

| 구분 | 가격 | 할인율 |
|------|------|:------:|
| **월 결제** | $5/user/month | - |
| **연 결제** | $50/user/year ($4.17/month) | 17% |

**비용 예시**
| 팀 규모 | 월 결제 | 연 결제 |
|---------|---------|---------|
| 5명 | $25/month | $250/year |
| 10명 | $50/month | $500/year |
| 15명 | $75/month | $750/year |

### 2.3 보드 티어 시스템

#### Standard 보드 (무료)

| 항목 | 제한 |
|------|------|
| **Task 생성** | 최대 10개 |
| **칸반 보드** | O |
| **위클리 스케줄** | X (Premium only) |
| **데일리 스케줄** | X (Premium only) |
| **멤버 초대** | O (제한 없음) |
| **마일스톤** | X (Premium only) |
| **관리 대시보드** | X (Premium only) |
| **태그** | O |

#### Premium 보드 (유료)

| 항목 | 기능 |
|------|------|
| **Task 생성** | 무제한 |
| **칸반 보드** | O |
| **위클리 스케줄** | O |
| **데일리 스케줄** | O |
| **멤버 초대** | O |
| **마일스톤** | O |
| **관리 대시보드** | O |
| **마일스톤 할당** | O |
| **태그** | O |
| **우선 지원** | O |

### 2.4 무료 체험 (Trial)

| 항목 | 내용 |
|------|------|
| **기간** | 보드 생성 후 **7일** |
| **기능** | Premium 전체 기능 |
| **자동 전환** | 7일 후 Standard로 자동 전환 |
| **결제 필요** | Trial 중 결제 시 즉시 Premium 유지 |

### 2.5 보드 상태 흐름

```
┌─────────────┐     7일 후      ┌─────────────┐
│   Trial     │ ─────────────► │  Standard   │
│ (7일 무료)   │   (미결제 시)   │  (무료)     │
└─────────────┘                └──────┬──────┘
      │                               │
      │ 결제 시                        │ 결제 시
      ▼                               ▼
┌─────────────┐                ┌─────────────┐
│  Premium    │ ◄───────────── │  Premium    │
│  (유료)     │    업그레이드    │  (유료)     │
└─────────────┘                └─────────────┘
```

| 상태 | 설명 | 기능 |
|------|------|------|
| **Trial** | 생성 후 7일간 | Premium 전체 기능 |
| **Standard** | 무료 기본 | Task 10개, 스케줄 X |
| **Premium** | 유료 구독 | 전체 기능 |

### 2.6 Premium 해제 시 동작

Premium → Standard 전환 시:

| 항목 | 동작 |
|------|------|
| **기존 Task** | 유지 (읽기/수정 가능) |
| **새 Task 생성** | 10개 초과 시 생성 불가 |
| **위클리 스케줄** | 접근 불가 (버튼 비활성화) |
| **데일리 스케줄** | 접근 불가 (버튼 비활성화) |
| **마일스톤** | 접근 불가 |
| **관리 대시보드** | 접근 불가 |
| **기존 데이터** | 삭제되지 않음, 재구독 시 복원 |

---

## 3. Premium 전환 UX

### 3.1 트리거 포인트

사용자가 Premium 기능에 접근할 때 자연스럽게 업그레이드 유도:

| 트리거 | 시점 | UX |
|--------|------|-----|
| **11번째 Task 생성** | Standard 보드에서 Task 생성 시 | 업그레이드 모달 |
| **위클리 스케줄 클릭** | Standard 보드에서 탭 클릭 | 업그레이드 모달 |
| **데일리 스케줄 클릭** | Standard 보드에서 탭 클릭 | 업그레이드 모달 |
| **마일스톤 생성** | Standard 보드에서 시도 | 업그레이드 모달 |
| **관리 대시보드 클릭** | Standard 보드에서 시도 | 업그레이드 모달 |
| **Trial 종료 3일 전** | 배너 표시 | 상단 알림 바 |
| **Trial 종료 당일** | 모달 표시 | 업그레이드 모달 |

### 3.2 업그레이드 모달 디자인

```
┌────────────────────────────────────────────────────────────────────┐
│                                                                [X] │
│                                                                    │
│                         🚀 Premium으로 업그레이드                    │
│                                                                    │
│     "더 많은 기능으로 팀의 생산성을 높이세요"                          │
│                                                                    │
├────────────────────────────────────────────────────────────────────┤
│                                                                    │
│  ✓ 무제한 Task 생성                                                │
│  ✓ 위클리 스케줄 (Gantt 차트)                                       │
│  ✓ 데일리 스케줄 (타임블록)                                         │
│  ✓ 마일스톤 관리                                                    │
│  ✓ 관리 대시보드                                                    │
│  ✓ 우선 지원                                                       │
│                                                                    │
├────────────────────────────────────────────────────────────────────┤
│                                                                    │
│  ┌────────────────────────┐   ┌────────────────────────┐          │
│  │       월 결제           │   │       연 결제           │          │
│  │                        │   │                        │          │
│  │    $5/user/month       │   │   $50/user/year        │          │
│  │                        │   │   (17% 할인)           │          │
│  │    [선택]              │   │   [선택] ⭐ 추천        │          │
│  └────────────────────────┘   └────────────────────────┘          │
│                                                                    │
│  현재 유료 멤버: 5명                                                │
│  예상 비용: $25/month 또는 $250/year                                │
│                                                                    │
├────────────────────────────────────────────────────────────────────┤
│                                                                    │
│        [나중에]                    [Premium 시작하기]               │
│                                                                    │
└────────────────────────────────────────────────────────────────────┘
```

---

## 4. 회원 및 권한 시스템

### 4.1 회원 가입/로그인

- 이메일 + 비밀번호
- 소셜 로그인 (Google, GitHub)
- 프로필: 이미지, 이름, 이메일
- 내 보드 목록, 즐겨찾기 보드

### 4.2 보드 역할 (Role)

| 역할 | 설명 | 과금 |
|------|------|:----:|
| **Owner** | 보드 생성자, 최고 권한 | O |
| **Admin** | 관리자 권한 | O |
| **Member** | 카드 작업 가능 | O |
| **Viewer** | 읽기 전용 | X |

### 4.3 역할별 권한

| 기능 | Owner | Admin | Member | Viewer |
|------|:-----:|:-----:|:------:|:------:|
| 보드 삭제 | O | X | X | X |
| 보드 설정 | O | O | X | X |
| 결제/구독 관리 | O | O | X | X |
| 멤버 초대/관리 | O | O | X | X |
| 블록 관리 | O | O | X | X |
| 마일스톤 관리 | O | O | X | X |
| 마일스톤 할당 관리 | O | O | X | X |
| 관리 대시보드 | O | O | O | O |
| Feature/Task 작업 | O | O | O | X |
| 태그 생성/삭제 | O | O | X | X |
| 스케줄 설정 | O | O | X | X |
| 내 스케줄 배치 | O | O | O | X |
| 타인 스케줄 배치 | O | O | X | X |
| 조회 | O | O | O | O |

### 4.4 멤버 초대

- **이메일 초대**: 역할 지정 가능
- **초대 링크**: 만료 기간, 사용 횟수 설정 가능

---

## 5. 블록 시스템

### 5.1 블록 타입

| 구분 | 블록 | 삭제 | 이름변경 | 위치 |
|------|------|:----:|:-------:|------|
| 고정 | **Feature** | X | X | 첫째 |
| 고정 | **Task** | X | X | 둘째 |
| 고정 | **Done** | X | X | 마지막 |
| 커스텀 | (자유) | O | O | Task~Done 사이 |

### 5.2 블록 배치

```
┌─────────┬─────────┬─────────────────────────────┬─────────┐
│ Feature │  Task   │      커스텀 블록 영역        │  Done   │
│ (고정)  │ (고정)  │    [In Progress] [Review]   │ (고정)  │
└─────────┴─────────┴─────────────────────────────┴─────────┘
```

---

## 6. 카드 시스템

### 6.1 계층 구조

```
Feature (피쳐 카드)
    │
    ├── 제목, 설명, 담당자, 우선순위, 마감일, 태그
    ├── 진행률 (완료 Task / 전체 Task)
    │
    └── Task (태스크 카드)
            │
            ├── 제목, 설명, 시작일, 마감일, 태그
            ├── 예상 시간 (estimated_minutes)      ← v7.0: 시간 추적
            ├── 현재 블록 위치
            │
            └── Checklist (체크리스트)
                    │
                    ├── 항목명, 담당자              ← 담당자가 Task 소속 결정
                    ├── 시작일, 마감일, 완료일
                    ├── 완료 여부
                    │
                    └── Schedule Block (타임블록)
                            │
                            ├── 날짜, 시작시간, 종료시간
                            └── 담당자
```

### 6.2 Task 담당자 개념 (v7.0)

> **핵심 원칙**: Task 자체에는 담당자가 없으며, ChecklistItem의 담당자가 Task의 "소속 멤버"를 결정합니다.

> ⚠️ **v7.0 결정사항**: Task.assignee 필드는 제거됩니다. 모든 담당자 관리는 ChecklistItem 수준에서 처리합니다.

| 항목 | 설명 |
|------|------|
| **Task 담당자** | ~~Task.assignee 필드 제거~~ → ChecklistItem.assignee로 대체 |
| **ChecklistItem 담당자** | 각 체크리스트 항목에 담당자 지정 |
| **Task 소속 멤버** | 해당 Task의 ChecklistItem에 담당자로 지정된 모든 멤버 |
| **작업 시간 산정** | 멤버가 담당한 ChecklistItem → Task → ScheduleBlock 시간 집계 |
| **통계 기준** | 팀 생산성, 작업 부하 등 모든 통계는 ChecklistItem.assignee 기준 |

```
예시:
Task: "API 개발"
├── Checklist: "JWT 구현" → 담당자: 김개발
├── Checklist: "OAuth 연동" → 담당자: 김개발
├── Checklist: "테스트 작성" → 담당자: 박QA
└── Checklist: "문서화" → 담당자: 이문서

→ Task 소속 멤버: 김개발, 박QA, 이문서
```

### 6.3 카드 생성 규칙

| 카드 | 생성 위치 | 생성 방법 | Standard 제한 |
|------|----------|----------|:-------------:|
| Feature | Feature 블록 | [+ Feature] 버튼 | - |
| Task | Task 블록 (자동) | Feature 상세 → 서브태스크 추가 | **10개** |
| Checklist | Task 내부 | Task 상세 → 체크리스트 추가 | - |
| Schedule Block | 데일리 스케줄 | 시간 영역 드래그 | Premium only |

### 6.4 카드 이동

- Feature: 이동 불가 (고정)
- Task: Task ↔ 커스텀 ↔ Done 자유롭게 이동
- Done 이동 시 Feature 진행률 자동 업데이트

### 6.5 Task 날짜 및 시간 필드

| 필드 | 설명 | 용도 |
|------|------|------|
| **start_date** | 시작일 | 주간 스케줄에서 Task 기간 표시 |
| **due_date** | 마감일 | 마감 관리, 상태 색상 결정 |
| **estimated_minutes** | 예상 시간 (분) | 용량 계획, 번다운 차트 (v7.0) |

---

## 7. 마일스톤 시스템 (Premium)

### 7.1 개요

마일스톤은 보드 내 Feature들을 **기간 단위로 그룹화**하여 관리하는 기능

> ⚠️ **Premium 전용 기능**: Standard 보드에서는 사용 불가

### 7.2 마일스톤 구조

```
Milestone
├── id
├── title (제목)
├── description (설명, 선택)
├── start_date (시작일)
├── end_date (종료일)
├── features (연결된 Feature 목록)
├── feature_count (연결된 Feature 수)
├── progress_percentage (진행도)
├── allocations (멤버 할당 목록)     ← v7.0
├── created_by (생성자)
└── created_at (생성일)
```

### 7.3 Feature 연결

- 하나의 Feature는 **여러 마일스톤**에 포함될 수 있음 (다대다)
- 마일스톤 생성/수정 시 Feature 선택
- 마일스톤 선택 시 해당 Feature와 Task만 필터링 표시

### 7.4 진행도 계산

```
진행도 = (연결된 Feature들의 완료 Task 합계 / 전체 Task 합계) × 100
```

### 7.5 마일스톤 필터링

- 보드 상단에서 마일스톤 선택 드롭다운
- "전체" 선택 시 모든 Feature/Task 표시
- 특정 마일스톤 선택 시:
  - 해당 마일스톤에 연결된 Feature만 표시
  - 해당 Feature의 Task만 표시
  - 주간 스케줄의 날짜 범위 자동 설정

---

## 8. 마일스톤 할당 시스템 (v7.0 신규)

### 8.1 개요

마일스톤별로 멤버의 **작업 가능 일수와 시간**을 사전에 할당하여 용량 계획을 수립

> ⚠️ **Premium 전용 기능**: Standard 보드에서는 사용 불가

### 8.2 할당 데이터 구조

```
MilestoneAllocation
├── id
├── milestone_id (FK)
├── member_id (FK)
├── working_days (작업 일수)
├── hours_per_day (일일 작업 시간, 기본 8시간)  ← v7.0: 디폴트 8시간
├── total_allocated_hours (총 할당 시간 = working_days × hours_per_day)
├── created_at
└── updated_at
```

### 8.3 할당 설정 UI

```
┌────────────────────────────────────────────────────────────────────┐
│ 마일스톤 할당 관리 - Sprint 1                                    [X] │
├────────────────────────────────────────────────────────────────────┤
│                                                                    │
│  기간: 2026.01.06 ~ 2026.01.20 (15일)                              │
│  기본 일일 작업시간: 8시간                                          │
│                                                                    │
├────────────────────────────────────────────────────────────────────┤
│  멤버          │  작업 일수  │  시간/일  │  총 할당 시간  │ 상태    │
│  ─────────────────────────────────────────────────────────────────  │
│  👤 김개발     │  [12일]    │  [8h]    │  96시간        │ 정상    │
│  👤 박디자인   │  [10일]    │  [6h]    │  60시간        │ 정상    │
│  👤 이기획     │  [15일]    │  [8h]    │  120시간       │ 정상    │
│  👤 최QA       │  [8일]     │  [8h]    │  64시간        │ -       │
│                                                                    │
│  ─────────────────────────────────────────────────────────────────  │
│  총 할당: 340시간                                                   │
│                                                                    │
├────────────────────────────────────────────────────────────────────┤
│                                      [취소]    [저장]              │
└────────────────────────────────────────────────────────────────────┘
```

### 8.4 할당 활용

| 용도 | 설명 |
|------|------|
| **용량 계획** | 마일스톤 기간 내 가용 시간 파악 |
| **번다운 차트** | 이상적 작업량 계산 기준 |
| **작업 부하 분석** | 실제 작업 시간과 할당 시간 비교 |
| **팀 생산성** | 멤버별 할당 대비 실제 소화량 |

---

## 9. 관리 대시보드 (v7.0 신규)

### 9.1 개요

프로젝트 관리자가 **마일스톤 건강도**, **팀 생산성**, **지연 항목**을 한눈에 파악할 수 있는 대시보드

> ⚠️ **Premium 전용 기능**: Standard 보드에서는 접근 불가

### 9.2 대시보드 구조

```
┌────────────────────────────────────────────────────────────────────┐
│ 관리 대시보드                            [마일스톤: Sprint 1 v] [⟳] │
├────────────────────────────────────────────────────────────────────┤
│                                                                    │
│  ┌──────────────────────────────────────────────────────────────┐  │
│  │                     요약 (Summary)                            │  │
│  │  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐ │  │
│  │  │ 마일스톤 │ │ 정상 진행│ │ 주의 필요│ │ 지연됨   │ │ 건강도  │ │  │
│  │  │   3개   │ │   2개   │ │   1개   │ │   0개   │ │  78%   │ │  │
│  │  └─────────┘ └─────────┘ └─────────┘ └─────────┘ └─────────┘ │  │
│  └──────────────────────────────────────────────────────────────┘  │
│                                                                    │
│  ┌──────────────────────────────────────────────────────────────┐  │
│  │               마일스톤 건강도 (Milestone Health)              │  │
│  │                                                              │  │
│  │  Sprint 1  ████████████████░░░░░░░░  65%  ON_TRACK  D-5     │  │
│  │  Sprint 2  ██████████████████████░░  85%  SLOW      D-12    │  │
│  │  Sprint 3  ██████░░░░░░░░░░░░░░░░░░  25%  AT_RISK   D+3     │  │
│  │                                                              │  │
│  │  [번다운 차트]  [Task 목록]  [인원 할당]                       │  │
│  └──────────────────────────────────────────────────────────────┘  │
│                                                                    │
│  ┌──────────────────────────────────────────────────────────────┐  │
│  │                 팀원 생산성 (Team Productivity)               │  │
│  │                                                              │  │
│  │  멤버       │ 할당 │ 완료 │ 완료율 │ 작업시간   │ 상태     │  │
│  │  ───────────────────────────────────────────────────────────  │  │
│  │  👤 김개발  │  5   │  3   │  60%  │ 32h/40h   │ 정상     │  │
│  │  👤 박디자인│  3   │  3   │ 100%  │ 48h/30h   │ 과열     │  │
│  │  👤 이기획  │  4   │  1   │  25%  │ 12h/32h   │ 여유     │  │
│  │                                                              │  │
│  └──────────────────────────────────────────────────────────────┘  │
│                                                                    │
│  ┌──────────────────────────────────────────────────────────────┐  │
│  │                   지연 항목 (Delayed Items)                   │  │
│  │                                                              │  │
│  │  [마감 초과 Feature]  [정체 Task]  [막힌 체크리스트]           │  │
│  │                                                              │  │
│  └──────────────────────────────────────────────────────────────┘  │
│                                                                    │
└────────────────────────────────────────────────────────────────────┘
```

### 9.3 마일스톤 건강도 섹션

#### 9.3.1 건강 상태

| 상태 | 조건 | 색상 |
|------|------|------|
| **ON_TRACK** | 예상 완료일 ≤ 마감일 | 초록색 |
| **SLOW** | 예상 완료일 > 마감일 (7일 이내) | 주황색 |
| **AT_RISK** | 예상 완료일 > 마감일 (7일 초과) | 빨간색 |
| **OVERDUE** | 마감일 지남 & 미완료 | 빨간색 진함 |

#### 9.3.2 속도(Velocity) 정보

| 필드 | 설명 |
|------|------|
| **average_tasks_per_day** | 최근 7일 평균 완료 Task 수 |
| **tasks_remaining** | 남은 Task 수 |
| **required_velocity** | 마감 내 완료하려면 필요한 일일 속도 |
| **average_minutes_per_day** | 최근 7일 평균 작업 시간 (분/일) |
| **required_minutes_per_day** | 마감 내 완료에 필요한 시간 (분/일) |

#### 9.3.3 번다운 차트

```
작업량 ▲
      │
  100 ├─●────────────────────────────
      │   ╲         이상적 남은 작업량
   80 ├─────●──────────────────────
      │       ╲
   60 ├─────────●────────────────    ← 실제 남은 작업량
      │           ●─●
   40 ├─────────────────●──────────
      │                   ╲
   20 ├───────────────────────●────
      │                         ╲
    0 ├───────────────────────────●
      └─────┼─────┼─────┼─────┼─────► 날짜
          1/6   1/10  1/14  1/18  1/20
```

#### 9.3.4 인원 할당 요약

| 필드 | 설명 |
|------|------|
| **total_allocated_members** | 할당된 멤버 수 |
| **total_allocated_hours** | 총 할당 시간 |
| **total_actual_hours** | 총 실제 작업 시간 |
| **utilization_rate** | 활용률 (실제/할당 × 100) |

### 9.4 팀원 생산성 섹션 (v7.0 재설계)

#### 9.4.1 테이블 컬럼

| 컬럼 | 설명 | 계산 방식 |
|------|------|----------|
| **멤버** | 팀원 정보 | - |
| **할당** | 담당 Task 수 | ChecklistItem assignee 기준 Task 카운트 |
| **완료** | 완료한 Task 수 | 위 기준 + Task.completed = true |
| **완료율** | 완료율 | 완료/할당 × 100 |
| **작업시간** | 실제/할당 시간 | ScheduleBlock 시간 / MilestoneAllocation 시간 |
| **상태** | 작업 부하 상태 | 아래 참조 |

#### 9.4.2 작업 부하 상태

| 상태 | 조건 | 의미 |
|------|------|------|
| **NORMAL (정상)** | 70% ≤ 비율 ≤ 130% | 적정 작업량 |
| **OVERWORKED (과열)** | 비율 > 130% | 할당 대비 과다 작업 |
| **RELAXED (여유)** | 비율 < 70% | 할당 대비 적은 작업 |

- 비율 = 최근 7일 평균 일일 작업시간 / 할당된 일일 작업시간
- 할당 없을 시 기본값 8시간/일 기준

#### 9.4.3 상세 정보 (확장)

멤버 클릭 시 표시:
- **담당 Task 목록**: ChecklistItem 담당자로 지정된 모든 Task
- **진행 중 체크리스트**: 미완료 ChecklistItem 목록
- **최근 완료 Task**: 최근 완료한 Task 목록

### 9.5 지연 항목 섹션

#### 9.5.1 마감 초과 Feature (Overdue Features)

| 필드 | 설명 |
|------|------|
| feature_title | Feature 제목 |
| due_date | 마감일 |
| days_overdue | 초과 일수 |
| progress_percentage | 진행률 |
| tasks_remaining | 남은 Task 수 |

#### 9.5.2 정체 Task (Stagnant Tasks)

| 필드 | 설명 | 기본 임계값 |
|------|------|:----------:|
| task_title | Task 제목 | - |
| current_block | 현재 블록 | - |
| days_in_block | 블록 체류 일수 | **3일** |
| assignee | 담당자 | - |

#### 9.5.3 막힌 체크리스트 (Stuck Checklists)

| 필드 | 설명 | 기본 임계값 |
|------|------|:----------:|
| checklist_title | 체크리스트 항목 | - |
| task_title | 소속 Task | - |
| days_stuck | 미완료 경과 일수 | **5일** |
| assignee | 담당자 | - |

#### 9.5.4 병목 요약 (Bottleneck Summary)

| 필드 | 설명 |
|------|------|
| most_delayed_member | 가장 많은 지연 항목을 가진 멤버 |
| most_problematic_block | 가장 많은 정체 Task가 있는 블록 |
| total_overdue_features | 총 마감 초과 Feature 수 |
| total_stagnant_tasks | 총 정체 Task 수 |
| total_stuck_checklists | 총 막힌 체크리스트 수 |

---

## 10. 위클리 스케줄 시스템 (Premium)

### 10.1 개요

Task의 시작일~마감일을 **Gantt 차트** 형태로 시각화하고, 드래그로 날짜를 조정하는 뷰

> ⚠️ **Premium 전용 기능**: Standard 보드에서는 접근 불가 (잠금 상태)

### 10.2 뷰 구성

```
┌─────────────────────────────────────────────────────────────────────────┐
│  [일][주]  [달력] 2026.01.05 ~ 2026.02.04  (31일)  [오늘]               │
│                                                    상태 범례: ● ● ● ● ● │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  Feature / Task      │  1/5  1/6  1/7  1/8  1/9  1/10 1/11 1/12 ...    │
│  ════════════════════════════════════════════════════════════════════   │
│                      │                                                  │
│  v ● 사용자 인증     │  ┌─────────────────────────────────────┐        │
│      시스템    0/3   │  │ ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░ │        │
│                      │  └─────────────────────────────────────┘        │
│    □ 로그인 API      │       ┌══════════════════════════════════┐      │
│      @Admin          │       │ 로그인 API 개발              ◐ │      │
│                      │       └══════════════════════════════════┘      │
│    □ 회원가입 폼     │            ┌═══════════════┐                    │
│      @김철수         │            │ 회원...    ◐ │                    │
│                      │            └═══════════════┘                    │
│    □ OAuth 설정      │                 ┌═══════════┐                   │
│      @Admin          │                 │ OAut.. ◐ │                   │
│                      │                 └═══════════┘                   │
│                      │                                                  │
│  > ● 대시보드 UI     │           ┌────────────────────┐                │
│                 0/2  │           │ ░░░░░░░░░░░░░░░░░░ │                │
│                      │           └────────────────────┘                │
│                                                                         │
│  ════════════════════════════════════════════════════════════════════   │
│                              │ (오늘 표시선)                            │
└─────────────────────────────────────────────────────────────────────────┘
```

### 10.3 핵심 기능

| 기능 | 설명 |
|------|------|
| **일/주 토글** | 일 단위(60px/일) ↔ 주 단위(80px/주) 전환 |
| **날짜 범위 선택** | 시작일~종료일 직접 지정 |
| **오늘 버튼** | 오늘 위치로 스크롤 이동 |
| **Feature 접기/펼치기** | Feature 클릭으로 하위 Task 토글 |
| **Task 바 리사이즈** | 좌우 핸들 드래그로 시작일/마감일 조정 |
| **Task 바 이동** | 롱프레스(0.3초) 후 드래그로 전체 기간 이동 |
| **마일스톤 필터** | 선택한 마일스톤의 Feature/Task만 표시 |
| **체크리스트 게이지** | Task 바에 원형 진행률 표시 |

### 10.4 Task 상태별 색상

| 상태 | 색상 | 조건 |
|------|------|------|
| 완료 | 초록색 | task.completed = true |
| 마감 초과 | 빨간색 | due_date < today & 미완료 |
| 마감 임박 | 주황색 | due_date = today 또는 tomorrow |
| 진행 중 | 파란색 | start_date ≤ today ≤ due_date |
| 진행 전 | 회색 | start_date > today |

---

## 11. 데일리 스케줄 시스템 (Premium)

### 11.1 개요

구성원별로 하루 근무시간을 시각화하고, Checklist 단위로 업무를 시간/블록에 배치

> ⚠️ **Premium 전용 기능**: Standard 보드에서는 접근 불가 (잠금 상태)

### 11.2 표시 모드

보드별로 스케줄 표시 방식 선택 가능 (설정에서 변경)

| 모드 | 설명 | 표시 예시 |
|------|------|----------|
| **시간 기준** | 시작/종료 시간으로 관리 | 09:00 ~ 18:00 |
| **블록 기준** | 블록 개수로 관리 | 1번 ~ 16번 블록 |

### 11.3 일/주 토글

| 모드 | 설명 |
|------|------|
| **일 단위** | 단일 날짜의 시간 일정표 |
| **주 단위** | 월~일 7일간의 일정을 한 화면에 표시 |

### 11.4 핵심 기능

| 기능 | 설명 |
|------|------|
| **세로 드래그 생성** | 빈 영역을 세로로 드래그하여 타임블록 생성 |
| **리사이즈** | 블록 상/하단 핸들로 시작/종료 시간 조절 |
| **롱프레스 드래그 이동** | 블록 길게 누른 후 상/하 이동 |
| **중복 감지** | 이동 시 다른 블록과 겹치면 빨간색 경고 표시 |
| **계층 연결** | Time Block → Checklist → Task → Feature |
| **상세 패널** | 블록 클릭 시 연결된 Checklist, Task, Feature + Task 전체 체크리스트 표시 |

### 11.5 블록 색상

| 상태 | 색상 | 조건 |
|------|------|------|
| 기본 | 파란색 | Checklist 미완료 |
| 완료 | 초록색 | Checklist 완료 |
| 마감 임박 | 주황색 | due_date가 오늘/내일 |
| 마감 초과 | 빨간색 | due_date 지남 & 미완료 |
| 미연결 | 회색 | Checklist 연결 없음 |
| 이동 불가 | 빨간색 | 이동 중 다른 블록과 겹침 |

---

## 12. 태그 시스템

- 보드별 태그 관리
- Feature, Task에 다중 태그 부여
- 색상 지정 가능
- 태그 기반 필터링/검색

---

## 13. UI 레이아웃

### 13.1 메인 보드 (칸반 뷰)

```
┌─────────────────────────────────────────────────────────────────────────┐
│  팀 칸반보드     [칸반보드] [위클리🔒] [데일리🔒] [관리🔒]  [필터] [설정] │
│                 [마일스톤: Sprint 1 v]                                   │
│  ┌──────────────────────────────────────────────────────────────────┐   │
│  │ ⏰ Trial이 3일 후 종료됩니다.                    [지금 업그레이드] │   │ ← Trial 알림 (조건부)
│  └──────────────────────────────────────────────────────────────────┘   │
├───────────┬───────────┬───────────┬───────────┬───────────┬─────────────┤
│  Feature  │   Task    │In Progress│  Review   │    QA     │    Done     │
├───────────┼───────────┼───────────┼───────────┼───────────┼─────────────┤
│┌─────────┐│┌─────────┐│┌─────────┐│┌─────────┐│           │┌───────────┐│
││ 로그인   ││ DB설계   ││ API개발  ││ UI검토   ││           ││ 로그인 UI ││
││ ███░ 3/4││← 로그인  ││← 로그인  ││← 로그인  ││           │└───────────┘│
││ #인증    ││          ││          ││          ││           │             │
│└─────────┘│└─────────┘│└─────────┘│└─────────┘│           │             │
│[+Feature] │  (자동)   │    [+]    │    [+]    │    [+]    │             │
├───────────┴───────────┴───────────┴───────────┴───────────┴─────────────┤
│                        Task: 8/10 (Standard)                            │ ← Task 카운터 (Standard만)
└─────────────────────────────────────────────────────────────────────────┘
```

### 13.2 보드 헤더 (티어별 차이)

**Premium 보드:**
```
[칸반보드] [위클리 스케줄] [데일리 스케줄] [관리]  ← 모든 탭 활성화
```

**Standard 보드:**
```
[칸반보드] [위클리 스케줄 🔒] [데일리 스케줄 🔒] [관리 🔒]  ← 🔒 표시, 클릭 시 업그레이드 모달
```

---

## 14. 데이터 모델

### 14.1 주요 엔티티

| 엔티티 | 설명 |
|--------|------|
| **User** | 사용자 |
| **Board** | 보드 (티어, 스케줄 표시 모드, 선택 마일스톤 포함) |
| **BoardMember** | 보드 멤버 (역할 포함) |
| **Block** | 블록 (고정/커스텀) |
| **Milestone** | 마일스톤 |
| **MilestoneFeature** | 마일스톤-Feature 연결 |
| **MilestoneAllocation** | 마일스톤-멤버 할당 (v7.0 신규) |
| **Feature** | Feature 카드 |
| **Task** | Task 카드 (시작일, 예상시간 필드 포함) |
| **Checklist** | 체크리스트 항목 |
| **ScheduleBlock** | 타임블록 (데일리 스케줄) |
| **Tag** | 태그 |
| **InviteLink** | 초대 링크 |
| **Subscription** | 구독 |
| **ActivityLog** | 활동 로그 |

### 14.2 MilestoneAllocation 엔티티 (v7.0 신규)

```
MilestoneAllocation
├── id
├── milestone_id (FK)
├── member_id (FK → User)
├── working_days (INT)                    ← 작업 일수
├── hours_per_day (DECIMAL, 기본 8.0)     ← 일일 작업 시간
├── total_allocated_hours (DECIMAL)       ← 총 할당 시간 (자동 계산)
├── created_at
└── updated_at
```

### 14.3 Task 엔티티 (v7.0 확장)

```
Task
├── id
├── feature_id (FK)
├── title
├── description
├── block_id (FK)
├── start_date (DATE)
├── due_date (DATE)
├── estimated_minutes (INT, nullable)     ← v7.0: 예상 시간 (분)
├── completed (BOOLEAN)
├── position (INT)
├── created_at
└── updated_at
```

### 14.4 핵심 관계

```
User ─── Board ─── Block
           │         │
           │    Feature ◄──┐
           │         │     │
           │       Task    │
           │         │     │
           │    Checklist  │
           │         │     │
           │  ScheduleBlock│
           │               │
           ├─── Tag ───────┘
           │
           ├─── Milestone ──┬── MilestoneFeature ───► Feature
           │                │
           │                └── MilestoneAllocation ──► User (v7.0)
           │
           ├─── BoardMember
           ├─── InviteLink
           └─── Subscription
```

---

## 15. API 구조

| 그룹 | Base Path | 주요 기능 |
|------|-----------|----------|
| Auth | `/auth` | 로그인, 회원가입 |
| Users | `/users` | 내 정보, 프로필 |
| Boards | `/boards` | 보드 CRUD, 티어 조회 |
| Blocks | `/boards/{id}/blocks` | 블록 관리 |
| Milestones | `/boards/{id}/milestones` | 마일스톤 CRUD (Premium) |
| Allocations | `/milestones/{id}/allocations` | 마일스톤 할당 (v7.0, Premium) |
| Features | `/boards/{id}/features` | Feature CRUD |
| Tasks | `/boards/{id}/tasks` | Task CRUD, 이동, 날짜/시간 수정 |
| Checklists | `/boards/{id}/tasks/{taskId}/checklists` | 체크리스트 |
| Schedules | `/boards/{id}/schedules` | 데일리 스케줄 (Premium) |
| Tags | `/boards/{id}/tags` | 태그 관리 |
| Members | `/boards/{id}/members` | 멤버 관리 |
| Statistics | `/boards/{id}/statistics` | 관리 대시보드 (v7.0, Premium) |
| Subscription | `/boards/{id}/subscription` | 구독 관리 |

### 15.1 Allocation API (v7.0 신규)

| Method | Endpoint | 설명 |
|--------|----------|------|
| GET | `/milestones/{id}/allocations` | 마일스톤 할당 목록 조회 |
| POST | `/milestones/{id}/allocations` | 할당 생성 |
| PUT | `/milestones/{id}/allocations/{allocationId}` | 할당 수정 |
| DELETE | `/milestones/{id}/allocations/{allocationId}` | 할당 삭제 |
| PUT | `/milestones/{id}/allocations/batch` | 일괄 저장 |

### 15.2 Statistics API (v7.0 신규)

| Method | Endpoint | 설명 |
|--------|----------|------|
| GET | `/boards/{id}/statistics/management` | 관리 대시보드 전체 데이터 |
| GET | `/boards/{id}/statistics/management?milestone_id={mId}` | 특정 마일스톤 필터 |

**응답 구조:**
```json
{
  "milestone_health": [...],
  "team_productivity": [...],
  "delayed_items": {
    "overdue_features": [...],
    "stagnant_tasks": [...],
    "stuck_checklists": [...],
    "bottleneck_summary": {...}
  },
  "summary": {...},
  "settings": {...}
}
```

### 15.3 Task API (v7.0 확장)

| Method | Endpoint | 설명 |
|--------|----------|------|
| PUT | `/boards/{id}/tasks/{taskId}/estimated-time` | 예상 시간 설정 |

---

## 16. 핵심 규칙 요약

| 항목 | 규칙 |
|------|------|
| 고정 블록 | Feature, Task, Done (삭제/이름변경 불가) |
| Feature 생성 | Feature 블록에서만 |
| Task 생성 | Feature 서브태스크로만 |
| Task 제한 | Standard 보드: 최대 10개 |
| Task 담당자 | Task.assignee 제거, ChecklistItem.assignee로 대체 (v7.0) |
| Checklist 생성 | Task 내부에서만 |
| Schedule Block 생성 | 데일리 스케줄에서 세로 드래그 (Premium only) |
| 완료 반영 | Done 이동 시 자동 |
| 역할 순서 | Owner > Admin > Member > Viewer |
| 과금 기준 | Owner + Admin + Member 수 × $5/month |
| 스케줄 표시 | 시간 기준 또는 블록 기준 (보드별 설정, Premium only) |
| 마일스톤 | Feature 그룹화, 기간별 필터링 (Premium only) |
| 마일스톤 할당 | 멤버별 작업 일수/시간 설정 (v7.0, Premium only) |
| Task 기간 | start_date ~ due_date로 표현 |
| Task 예상 시간 | estimated_minutes 필드 (v7.0) |
| Trial 기간 | 7일, 자동으로 Standard 전환 |
| 기본 일일 작업시간 | 8시간 (v7.0) |
| 정체 Task 임계값 | 3일 (v7.0) |
| 막힌 체크리스트 임계값 | 5일 (v7.0) |
| 작업 부하 상태 | NORMAL(70-130%), OVERWORKED(>130%), RELAXED(<70%) (v7.0) |

---

## 17. 기술 스택

### Frontend
- React 18 + TypeScript + Vite
- Tailwind CSS + Radix UI
- Three.js + @react-three/fiber (3D 랜딩 페이지)
- Framer Motion (애니메이션)
- Recharts (차트, v7.0)
- HTML5 Drag & Drop API (칸반 드래그앤드롭)
- Context API (상태 관리)
- date-fns

### Backend
- Java 21 + Spring Boot 3.4
- Spring Security + JWT
- Spring Data JPA
- PostgreSQL

### Infrastructure
- AWS ECS Fargate + Aurora PostgreSQL
- CloudFront + S3 + Redis
- Terraform (IaC)

### Payment
- Stripe (결제 시스템)

---

## 18. 디자인 시스템 (Bridge Theme)

### 18.1 색상 팔레트

```css
/* Primary */
--bridge-dark: #0A0E17;      /* 배경 메인 */
--bridge-obsidian: #0F1419;  /* 배경 서브 */
--bridge-accent: #6366F1;    /* 인디고 (주요 강조) */
--bridge-secondary: #2DD4BF; /* 틸 (보조 강조) */

/* Status Colors */
--status-success: #10B981;   /* 완료, 성공, 정상 */
--status-warning: #F59E0B;   /* 마감 임박, 주의 */
--status-error: #EF4444;     /* 오류, 마감 초과, 과열 */
--status-info: #3B82F6;      /* 정보, 진행 중, 여유 */

/* Text */
--text-primary: #FFFFFF;
--text-secondary: #94A3B8;
--text-muted: #64748B;
```

### 18.2 작업 부하 상태 색상 (v7.0)

| 상태 | 텍스트 색상 | 배경 색상 | 테두리 색상 |
|------|------------|----------|------------|
| **NORMAL (정상)** | emerald-400 | emerald-500/20 | emerald-500/30 |
| **OVERWORKED (과열)** | red-400 | red-500/20 | red-500/30 |
| **RELAXED (여유)** | blue-400 | blue-500/20 | blue-500/30 |

### 18.3 Glass Morphism

```css
.glass {
  background: rgba(255, 255, 255, 0.03);
  backdrop-filter: blur(12px);
  border: 1px solid rgba(255, 255, 255, 0.05);
}
```

### 18.4 Typography

- **헤딩**: Serif (font-serif)
- **본문**: Sans-serif (system-ui)
- **코드/숫자**: Monospace

---

## 변경 이력

| 버전 | 날짜 | 주요 변경 |
|------|------|----------|
| v3.0 | 2025-01 | 데일리 스케줄 시스템 추가 |
| v4.0 | 2026-01 | 스케줄 블록/시간 표시 모드, 타임블록 이동, 중복 감지, 통합 체크리스트 모달 |
| v5.0 | 2026-01 | 마일스톤 시스템, 위클리 스케줄 뷰, 데일리 일/주 토글, Task 시작일 필드 |
| v6.0 | 2026-01 | 과금 모델 개편: Seat 기반 $5/user/month, Standard/Premium 보드 티어, Task 10개 제한, Premium 전환 UX, Bridge 디자인 시스템 |
| v7.0 | 2026-01 | **관리 대시보드**: 마일스톤 건강도(번다운 차트, 속도 분석), 팀원 생산성(ChecklistItem 담당자 기준, 작업 부하 상태), 지연 항목 관리. **마일스톤 할당**: 멤버별 작업 일수/시간 배정, 기본 8시간/일. **Task 시간 추적**: 예상 시간(estimated_minutes) 필드 추가. **Task.assignee 제거**: ChecklistItem.assignee로 대체, 모든 통계는 ChecklistItem 담당자 기준 |

---

**문서 버전**: 7.0
**최종 수정**: 2026년 1월 13일
