# 팀 칸반보드 - 기획서 v4.0

## 1. 서비스 개요

### 1.1 프로젝트 목적
소규모 팀(5~15명)이 **Feature 단위**로 업무를 관리하고, 자유로운 워크플로우를 구성할 수 있는 **칸반보드 웹 애플리케이션**

### 1.2 핵심 컨셉

| 컨셉 | 설명 |
|------|------|
| **고정 블록 3개** | Feature, Task, Done (삭제/수정 불가) |
| **커스텀 블록** | 팀 상황에 맞게 Task와 Done 사이에 자유롭게 추가 |
| **Feature-Task 연동** | Feature 내 서브태스크 추가 시 Task 블록에 카드 자동 생성 |
| **완료 추적** | Task가 Done 블록으로 이동하면 Feature 진행률 자동 반영 |
| **팀 협업** | 보드에 멤버 초대 및 역할 기반 권한 관리 |
| **태그 시스템** | Feature/Task에 태그 부여하여 분류 및 필터링 |
| **체크리스트** | Task 내부에 세부 항목 관리 |
| **데일리 스케줄** | 구성원별 시간/블록 기반 업무 배치 및 관리 |

### 1.3 서비스 구조

```
┌─────────────────────────────────────────────────────────────────────┐
│                           사용자 (User)                              │
│  - 이메일/소셜 로그인                                                 │
│  - 여러 보드 소유 또는 참여 가능                                       │
└───────────────────────────────┬─────────────────────────────────────┘
                                │
                    ┌───────────▼───────────┐
                    │       보드 (Board)      │
                    │  - 팀 단위 작업 공간     │
                    │  - 구독/결제 단위        │
                    │  - 스케줄 표시 모드 설정  │
                    └───────────┬───────────┘
                                │
        ┌───────────────────────┼───────────────────────┐
        │                       │                       │
┌───────▼───────┐       ┌───────▼───────┐       ┌───────▼───────┐
│  블록 (Block)   │       │ 멤버 (Member) │       │  태그 (Tag)    │
│  - 고정 3개     │       │  - 역할 기반   │       │  - 분류 용도   │
│  - 커스텀 추가  │       │  - 권한 관리   │       │  - 필터링      │
└───────┬───────┘       └───────────────┘       └───────────────┘
        │
┌───────▼───────┐
│ Feature (카드) │  ← 보드의 Feature 블록에만 생성
│  - 업무 단위    │
│  - 진행률 추적  │
└───────┬───────┘
        │
┌───────▼───────┐
│  Task (카드)   │  ← Feature의 서브태스크로만 생성
│  - 세부 작업    │
│  - 블록 간 이동 │
└───────┬───────┘
        │
┌───────▼───────┐
│  Checklist    │  ← Task 내 세부 항목
│  - 체크 항목   │
│  - 담당자/일정 │
└───────┬───────┘
        │
┌───────▼───────┐
│ Schedule Block │  ← 데일리 스케줄 타임블록
│  - 시간/블록    │
│  - 배치        │
└───────────────┘
```

---

## 2. 비즈니스 모델

### 2.1 요금 정책

| 정책 | 내용 |
|------|------|
| 회원가입 | 무료 |
| 보드 생성 | 무료 |
| 무료 체험 | 보드 생성 후 7일간 전체 기능 |
| 과금 기준 | **구성원 수** (Owner + Admin + Member, Viewer 제외) |
| 결제 주체 | **Owner, Admin만** 결제 가능 |

### 2.2 요금표

| 구성원 수 | 월 결제 | 연 결제 (월 환산) | 할인율 |
|----------|---------|------------------|-------|
| 1~3명 | 무료 | 무료 | - |
| 4~10명 | ₩29,000 | ₩24,000 (₩290,000/년) | 17% |
| 11~25명 | ₩69,000 | ₩55,000 (₩660,000/년) | 20% |
| 26~50명 | ₩129,000 | ₩99,000 (₩1,190,000/년) | 23% |
| 51명+ | 문의 | 협의 | - |

### 2.3 보드 상태 흐름

```
보드 생성 → Trial (7일) → Grace (3일) → Active 또는 Suspended
```

| 상태 | 기간 | 기능 |
|------|------|------|
| Trial | 7일 | 전체 기능 |
| Grace | 3일 | 전체 기능 + 결제 유도 |
| Active | 구독 중 | 전체 기능 |
| Suspended | 미결제 | 읽기 전용 (30일 후 삭제) |

---

## 3. 회원 및 권한 시스템

### 3.1 회원 가입/로그인

- 이메일 + 비밀번호
- 소셜 로그인 (Google, GitHub)
- 프로필: 이미지, 이름, 이메일
- 내 보드 목록, 즐겨찾기 보드

### 3.2 보드 역할 (Role)

| 역할 | 설명 | 과금 |
|------|------|:----:|
| **Owner** | 보드 생성자, 최고 권한 | O |
| **Admin** | 관리자 권한 | O |
| **Member** | 카드 작업 가능 | O |
| **Viewer** | 읽기 전용 | X |

### 3.3 역할별 권한

| 기능 | Owner | Admin | Member | Viewer |
|------|:-----:|:-----:|:------:|:------:|
| 보드 삭제 | O | X | X | X |
| 보드 설정 | O | O | X | X |
| 멤버 초대/관리 | O | O | X | X |
| 블록 관리 | O | O | X | X |
| Feature/Task 작업 | O | O | O | X |
| 태그 생성/삭제 | O | O | X | X |
| 스케줄 설정 | O | O | X | X |
| 내 스케줄 배치 | O | O | O | X |
| 타인 스케줄 배치 | O | O | X | X |
| 조회 | O | O | O | O |

### 3.4 멤버 초대

- **이메일 초대**: 역할 지정 가능
- **초대 링크**: 만료 기간, 사용 횟수 설정 가능

---

## 4. 블록 시스템

### 4.1 블록 타입

| 구분 | 블록 | 삭제 | 이름변경 | 위치 |
|------|------|:----:|:-------:|------|
| 고정 | **Feature** | X | X | 첫째 |
| 고정 | **Task** | X | X | 둘째 |
| 고정 | **Done** | X | X | 마지막 |
| 커스텀 | (자유) | O | O | Task~Done 사이 |

### 4.2 블록 배치

```
┌─────────┬─────────┬─────────────────────────────┬─────────┐
│ Feature │  Task   │      커스텀 블록 영역        │  Done   │
│ (고정)  │ (고정)  │    [In Progress] [Review]   │ (고정)  │
└─────────┴─────────┴─────────────────────────────┴─────────┘
```

---

## 5. 카드 시스템

### 5.1 계층 구조

```
Feature (피쳐 카드)
    │
    ├── 제목, 설명, 담당자, 우선순위, 마감일, 태그
    ├── 진행률 (완료 Task / 전체 Task)
    │
    └── Task (태스크 카드)
            │
            ├── 제목, 설명, 담당자, 마감일, 태그
            ├── 현재 블록 위치
            │
            └── Checklist (체크리스트)
                    │
                    ├── 항목명, 담당자
                    ├── 시작일, 마감일, 완료일
                    ├── 완료 여부
                    │
                    └── Schedule Block (타임블록)
                            │
                            ├── 날짜, 시작시간, 종료시간
                            └── 담당자
```

### 5.2 카드 생성 규칙

| 카드 | 생성 위치 | 생성 방법 |
|------|----------|----------|
| Feature | Feature 블록 | [+ Feature] 버튼 |
| Task | Task 블록 (자동) | Feature 상세 → 서브태스크 추가 |
| Checklist | Task 내부 | Task 상세 → 체크리스트 추가 |
| Schedule Block | 데일리 스케줄 | 시간 영역 드래그 |

### 5.3 카드 이동

- Feature: 이동 불가 (고정)
- Task: Task ↔ 커스텀 ↔ Done 자유롭게 이동
- Done 이동 시 Feature 진행률 자동 업데이트

---

## 6. 데일리 스케줄 시스템

### 6.1 개요

구성원별로 하루 근무시간을 시각화하고, Checklist 단위로 업무를 시간/블록에 배치

### 6.2 표시 모드 (v4.0 신규)

보드별로 스케줄 표시 방식 선택 가능 (설정에서 변경)

| 모드 | 설명 | 표시 예시 |
|------|------|----------|
| **시간 기준** | 시작/종료 시간으로 관리 | 09:00 ~ 18:00 |
| **블록 기준** | 블록 개수로 관리 | 1번 ~ 16번 블록 |

#### 시간 기준 모드
```
시간      김개발          이디자인
════════════════════════════════════
09:00  ┌───────────┐
       │ 로그인 API │   ┌───────────┐
09:30  │ 개발       │   │ 메인 화면 │
       │            │   │ 디자인    │
10:00  │            │   │           │
       └───────────┘   └───────────┘
```

#### 블록 기준 모드 (v4.0 신규)
```
블록      김개발          이디자인
════════════════════════════════════
  1    ┌───────────┐
       │ 로그인 API │   ┌───────────┐
  2    │ 개발       │   │ 메인 화면 │
       │            │   │ 디자인    │
  3    │            │   │           │
       └───────────┘   └───────────┘
```

### 6.3 핵심 기능

| 기능 | 설명 |
|------|------|
| **세로 드래그 생성** | 빈 영역을 세로로 드래그하여 타임블록 생성 |
| **리사이즈** | 블록 상/하단 핸들로 시작/종료 시간 조절 |
| **롱프레스 드래그 이동** | 블록 길게 누른 후 상/하 이동 (v4.0) |
| **중복 감지** | 이동 시 다른 블록과 겹치면 빨간색 경고 표시 (v4.0) |
| **계층 연결** | Time Block → Checklist → Task → Feature |
| **상세 패널** | 블록 클릭 시 연결된 Checklist, Task, Feature + Task 전체 체크리스트 표시 |

### 6.4 UI 레이아웃

```
┌─────────────────────────────────────────────────────────────────────────┐
│  데일리 스케줄                      < 2026-01-12 (월) >   [오늘] [설정]   │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  블록     김개발          이디자인         박기획          최QA          │
│  ════════════════════════════════════════════════════════════════════   │
│                                                                         │
│   1    ┌───────────┐                                                    │
│        │ 로그인 API │   ┌───────────┐                    ┌───────────┐  │
│   2    │ 개발       │   │ 메인 화면 │                    │ 테스트    │  │
│        │            │   │ 디자인    │   ┌───────────┐   │ 케이스    │  │
│   3    │ ═══════════│   │           │   │ 기획서    │   │ 작성      │  │
│        │ 백엔드 인증 │   │ ═══════════│   │ 검토      │   └─────●────┘  │
│   4    │ 로그인 기능 │   │ UI작업    │   │           │         ↑       │
│        │            │   │ 로그인    │   │ ═══════════│   리사이즈 핸들  │
│   5    │            │   │ 기능      │   │ 문서 작성  │                  │
│        │            │   └─────●────┘   │ 로그인    │                  │
│   6    └─────●──────┘         ↑        └───────────┘                   │
│              ↑            리사이즈                                       │
│         리사이즈                                                         │
│                                                                         │
│  ════════════════════════════════════════════════════════════════════   │
│  빈 영역을 세로로 드래그하여 새 타임블록을 생성하세요                      │
└─────────────────────────────────────────────────────────────────────────┘
```

### 6.5 타임블록 생성 모달 (v4.0 개선)

세로 드래그 후 통합 모달 표시:

```
┌────────────────────────────────────────────────────────┐
│  타임블록 추가                                      [X] │
├────────────────────────────────────────────────────────┤
│  ┌──────────────────────────────────────────────────┐  │
│  │  [블록] 3번 ~ 5번 블록                            │  │ ← 블록 모드
│  │  [시간] 10:00 - 11:30                            │  │ ← 시간 모드
│  └──────────────────────────────────────────────────┘  │
├────────────────────────────────────────────────────────┤
│  [폴더] Feature                                        │
│  ┌──────────────────────────────────────────────────┐  │
│  │ Select a feature                              [v] │  │
│  └──────────────────────────────────────────────────┘  │
├────────────────────────────────────────────────────────┤
│  [문서] Task                                           │
│  ┌──────────────────────────────────────────────────┐  │
│  │ Select a task                                 [v] │  │
│  └──────────────────────────────────────────────────┘  │
├────────────────────────────────────────────────────────┤
│  [체크] 기존 체크리스트에서 선택           클릭하여 선택 │
│  ┌──────────────────────────────────────────────────┐  │
│  │ [ ] 로그인 API 개발 - 세부작업 1              선택 │  │
│  │ [ ] 로그인 API 개발 - 세부작업 2              선택 │  │
│  │ [ ] 로그인 API 개발 - 세부작업 3              선택 │  │
│  └──────────────────────────────────────────────────┘  │
├────────────────────────────────────────────────────────┤
│  ─────────────── 또는 새로 생성 ────────────────────    │
├────────────────────────────────────────────────────────┤
│  새 체크리스트 항목                                     │
│  ┌──────────────────────────────────────────────────┐  │
│  │ 새 체크리스트 제목 입력                           │  │
│  └──────────────────────────────────────────────────┘  │
├────────────────────────────────────────────────────────┤
│           [Cancel]              [Create]               │
└────────────────────────────────────────────────────────┘
```

### 6.6 타임블록 상세 패널 (v4.0 개선)

```
┌─────────────────────────────────────┐
│  타임블록 상세                   [X] │
├─────────────────────────────────────┤
│  ┌─────────────────────────────────┐│
│  │ [블록] 1번 ~ 9번 블록  (9블록)  ││ ← 블록 모드
│  │ [시간] 09:00 - 13:30 (4시간30분)││ ← 시간 모드
│  │ [달력] 2026년 1월 12일          ││
│  └─────────────────────────────────┘│
├─────────────────────────────────────┤
│  [폴더] FEATURE        클릭하여 상세│
│  ● 사용자 인증 시스템               │
├─────────────────────────────────────┤
│  [문서] TASK           클릭하여 상세│
│  로그인 API 개발                    │
├─────────────────────────────────────┤
│  [체크] TASK 체크리스트      1/3 완료│ ← v4.0 신규
│  ┌─────────────────────────────────┐│
│  │ [v] 로그인 API 개발 - 세부작업1 ││
│  │ [ ] 로그인 API 개발 - 세부작업2 ││ ← (현재) 표시
│  │ [ ] 로그인 API 개발 - 세부작업3 ││
│  └─────────────────────────────────┘│
├─────────────────────────────────────┤
│  [휴지통] 타임블록 삭제              │
└─────────────────────────────────────┘
```

### 6.7 타임블록 리사이즈

```
상단 핸들 드래그 → 시작시간/시작블록 조절
하단 핸들 드래그 → 종료시간/종료블록 조절
- 30분/1블록 단위 스냅
- 최소 30분/1블록 제한
- 드래그 중 툴팁 표시
```

### 6.8 타임블록 이동 (v4.0 신규)

```
1. 블록을 0.5초 이상 길게 누름 (롱프레스)
2. 블록이 이동 모드로 전환 (파란색 테두리)
3. 상하로 드래그하여 이동
4. 다른 블록과 겹치면 빨간색으로 변경 + "이동 불가" 표시
5. 드롭 시 겹침 없으면 이동 완료, 겹치면 원위치
```

### 6.9 블록 색상

| 상태 | 색상 | 조건 |
|------|------|------|
| 기본 | 파란색 | Checklist 미완료 |
| 완료 | 초록색 | Checklist 완료 |
| 마감 임박 | 주황색 | due_date가 오늘/내일 |
| 마감 초과 | 빨간색 | due_date 지남 & 미완료 |
| 미연결 | 회색 | Checklist 연결 없음 |
| 이동 불가 | 빨간색 | 이동 중 다른 블록과 겹침 (v4.0) |

### 6.10 스케줄 설정 모달 (v4.0 신규)

```
┌────────────────────────────────────────────────────────┐
│  스케줄 설정                                        [X] │
├────────────────────────────────────────────────────────┤
│  관리 방식                                             │
│  ┌────────────────────┐  ┌────────────────────┐       │
│  │ [시계] 시간 기준    │  │ [블록] 블록 기준    │       │
│  │ 시작/종료 시간 설정 │  │ 블록 개수로 설정   │       │
│  └────────────────────┘  └────────────────────┘       │
├────────────────────────────────────────────────────────┤
│                                                        │
│  [시간 모드일 때]                                       │
│  시작 시간: [09:00 v]                                  │
│  종료 시간: [18:00 v]                                  │
│                                                        │
│  [블록 모드일 때]                                       │
│  블록 개수: [16개 v] (8.0시간)                         │
│                                                        │
├────────────────────────────────────────────────────────┤
│  설정 미리보기                                         │
│  ┌──────────────────────────────────────────────────┐  │
│  │ [시간] 근무 시간: 09:00 ~ 18:00                  │  │
│  │       총 시간: 9.0시간 | 블록 수: 18개           │  │
│  │                                                  │  │
│  │ [블록] 총 블록 수: 16개                          │  │
│  └──────────────────────────────────────────────────┘  │
├────────────────────────────────────────────────────────┤
│           [취소]                  [저장]               │
└────────────────────────────────────────────────────────┘
```

---

## 7. 태그 시스템

- 보드별 태그 관리
- Feature, Task에 다중 태그 부여
- 색상 지정 가능
- 태그 기반 필터링/검색

---

## 8. UI 레이아웃

### 8.1 메인 보드 (칸반 뷰)

```
┌─────────────────────────────────────────────────────────────────────────┐
│  팀 칸반보드           [칸반보드] [데일리스케줄]    [필터] [팀원] [설정]  │
├───────────┬───────────┬───────────┬───────────┬───────────┬─────────────┤
│  Feature  │   Task    │In Progress│  Review   │    QA     │    Done     │
├───────────┼───────────┼───────────┼───────────┼───────────┼─────────────┤
│┌─────────┐│┌─────────┐│┌─────────┐│┌─────────┐│           │┌───────────┐│
││ 로그인   ││ DB설계   ││ API개발  ││ UI검토   ││           ││ 로그인 UI ││
││ ███░ 3/4││← 로그인  ││← 로그인  ││← 로그인  ││           │└───────────┘│
││ #인증    ││          ││          ││          ││           │             │
│└─────────┘│└─────────┘│└─────────┘│└─────────┘│           │             │
│[+Feature] │  (자동)   │    [+]    │    [+]    │    [+]    │             │
└───────────┴───────────┴───────────┴───────────┴───────────┴─────────────┘
```

### 8.2 Feature 상세 모달

```
┌────────────────────────────────────────────────────┐
│ 로그인 기능 구현                                [X] │
├────────────────────────────────────────────────────┤
│ 설명: 소셜 로그인 포함 로그인 기능 개발             │
│ 담당: @김PM  |  우선순위: High  |  마감: 01/15     │
│ 태그: #인증 #MVP                                   │
├────────────────────────────────────────────────────┤
│ 서브태스크                                 3/4 완료 │
│ ┌──────────────────────────────────────────────┐  │
│ │ [v] 로그인 UI 디자인        @이디자인  → Done │  │
│ │ [v] 로그인 API 개발         @박개발    → Done │  │
│ │ [v] 소셜 로그인 연동        @박개발    → Done │  │
│ │ [ ] 로그인 테스트          @최QA   → Review  │  │
│ └──────────────────────────────────────────────┘  │
│ [+ 서브태스크 추가]                                │
└────────────────────────────────────────────────────┘
```

### 8.3 Task 상세 모달

```
┌────────────────────────────────────────────────────┐
│ 로그인 API 개발                                 [X] │
├────────────────────────────────────────────────────┤
│ Feature: 로그인 기능 구현                          │
│ 현재 위치: In Progress                             │
│ 담당: @박개발  |  마감: 01/12                      │
│ 태그: #백엔드 #API                                 │
├────────────────────────────────────────────────────┤
│ 체크리스트                                   2/4   │
│ ┌──────────────────────────────────────────────┐  │
│ │ [v] JWT 토큰 발급 구현                        │  │
│ │ [v] 리프레시 토큰 구현                        │  │
│ │ [ ] 소셜 로그인 연동       @박개발  01/11     │  │
│ │ [ ] API 테스트 작성        @박개발  01/12     │  │
│ └──────────────────────────────────────────────┘  │
│ [+ 항목 추가]                                      │
└────────────────────────────────────────────────────┘
```

---

## 9. 데이터 모델

### 9.1 주요 엔티티

| 엔티티 | 설명 |
|--------|------|
| **User** | 사용자 |
| **Board** | 보드 (스케줄 표시 모드 포함) |
| **BoardMember** | 보드 멤버 (역할 포함) |
| **Block** | 블록 (고정/커스텀) |
| **Feature** | Feature 카드 |
| **Task** | Task 카드 |
| **Checklist** | 체크리스트 항목 |
| **ScheduleBlock** | 타임블록 (데일리 스케줄) |
| **Tag** | 태그 |
| **InviteLink** | 초대 링크 |
| **Subscription** | 구독 |
| **ActivityLog** | 활동 로그 |

### 9.2 Board 엔티티 (v4.0 확장)

```
Board
├── id
├── name
├── description
├── work_hours_per_day (기본 8)
├── work_start_time (기본 09:00)
├── schedule_display_mode (TIME | BLOCK)  ← v4.0 신규
├── created_at
└── updated_at
```

### 9.3 핵심 관계

```
User ─── Board ─── Block
           │         │
           │    Feature
           │         │
           │       Task ─── Checklist ─── ScheduleBlock
           │         │
           ├─── Tag ─┘
           │
           ├─── BoardMember
           ├─── InviteLink
           └─── Subscription
```

---

## 10. API 구조

| 그룹 | Base Path | 주요 기능 |
|------|-----------|----------|
| Auth | `/auth` | 로그인, 회원가입 |
| Users | `/users` | 내 정보, 프로필 |
| Boards | `/boards` | 보드 CRUD |
| Blocks | `/boards/{id}/blocks` | 블록 관리 |
| Features | `/boards/{id}/features` | Feature CRUD |
| Tasks | `/boards/{id}/tasks` | Task CRUD, 이동 |
| Checklists | `/boards/{id}/tasks/{taskId}/checklists` | 체크리스트 |
| Schedules | `/boards/{id}/schedules` | 데일리 스케줄 |
| Tags | `/boards/{id}/tags` | 태그 관리 |
| Members | `/boards/{id}/members` | 멤버 관리 |
| Subscription | `/boards/{id}/subscription` | 구독 관리 |

### 10.1 Schedule API (v4.0 확장)

| Method | Endpoint | 설명 |
|--------|----------|------|
| GET | `/schedules/daily` | 일별 스케줄 조회 |
| GET | `/schedules/settings` | 스케줄 설정 조회 |
| PUT | `/schedules/settings` | 스케줄 설정 수정 (표시 모드 포함) |
| POST | `/schedules/blocks` | 타임블록 생성 (기존 체크리스트) |
| POST | `/schedules/blocks/with-checklist` | 타임블록 생성 (새 체크리스트) |
| PUT | `/schedules/blocks/{id}` | 타임블록 수정 (시간/위치) |
| DELETE | `/schedules/blocks/{id}` | 타임블록 삭제 |

---

## 11. 핵심 규칙 요약

| 항목 | 규칙 |
|------|------|
| 고정 블록 | Feature, Task, Done (삭제/이름변경 불가) |
| Feature 생성 | Feature 블록에서만 |
| Task 생성 | Feature 서브태스크로만 |
| Checklist 생성 | Task 내부에서만 |
| Schedule Block 생성 | 데일리 스케줄에서 세로 드래그 |
| 완료 반영 | Done 이동 시 자동 |
| 역할 순서 | Owner > Admin > Member > Viewer |
| 과금 기준 | Owner + Admin + Member 수 |
| 스케줄 표시 | 시간 기준 또는 블록 기준 (보드별 설정) |

---

## 12. 기술 스택

### Frontend
- React 18 + TypeScript + Vite
- Tailwind CSS + Radix UI
- react-dnd (칸반 드래그앤드롭)
- TanStack Query
- date-fns

### Backend
- Java 21 + Spring Boot 3.4
- Spring Security + JWT
- Spring Data JPA
- PostgreSQL

### Infrastructure
- AWS ECS Fargate + Aurora PostgreSQL
- CloudFront + S3 + Redis
- Terraform (IaC)

---

## 13. 위클리 스케줄 시스템 (v4.1 신규)

### 13.1 개요

Feature-Task 계층을 주 단위 타임라인으로 시각화하고, Task의 일정을 드래그로 자유롭게 조정할 수 있는 간트 차트 스타일 뷰

### 13.2 핵심 컨셉

| 컨셉 | 설명 |
|------|------|
| **세로 축** | Feature → Task 계층 구조 (트리 형태) |
| **가로 축** | 주 단위 (월~일, 7일) |
| **Task 바** | 시작일~종료일을 가로 바로 표현 |
| **드래그 조작** | 좌우 스트레치로 기간 조절, 드래그로 이동 |
| **Feature 집계** | 하위 Task 기간을 자동 집계하여 표시 |

### 13.3 UI 레이아웃

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│  팀 칸반보드       [칸반보드] [위클리스케줄] [데일리스케줄]    [필터] [팀원] [설정]    │
├─────────────────────────────────────────────────────────────────────────────────────┤
│  [<]  2026년 1월 2주차 (01/06 ~ 01/12)  [>]                    [오늘] [이번주]       │
├────────────────────┬────────┬────────┬────────┬────────┬────────┬────────┬────────┤
│  Feature / Task    │  월    │  화    │  수    │  목    │  금    │  토    │  일    │
│                    │ 01/06  │ 01/07  │ 01/08  │ 01/09  │ 01/10  │ 01/11  │ 01/12  │
├────────────────────┼────────┴────────┴────────┴────────┴────────┴────────┴────────┤
│ ▼ 사용자 인증 시스템 │ (집계 바)                                                     │
│   ├─ 로그인 UI     │      [████████████]                                           │
│   ├─ 로그인 API    │           [██████████████████]                                │
│   └─ 로그인 테스트 │                            [██████████]                       │
├────────────────────┼─────────────────────────────────────────────────────────────┤
│ ▼ 결제 시스템      │ (집계 바)                                                     │
│   ├─ 결제 UI      │      [███████████████]                                        │
│   └─ PG 연동      │                [█████████████████████████]                    │
└────────────────────┴─────────────────────────────────────────────────────────────┘
```

### 13.4 Task 바 조작

#### 좌우 스트레치 (기간 조절)
- 좌측 핸들 드래그 → 시작일 조절
- 우측 핸들 드래그 → 종료일 조절

#### 드래그 이동 (전체 기간 이동)
- Task 바 중앙 클릭 & 좌우 드래그
- 시작일/종료일이 함께 이동, 기간(duration)은 유지

### 13.5 Feature 집계 바

하위 Task들의 시작일~종료일 범위를 자동 계산하여 표시
- 시작일: 하위 Task 중 가장 빠른 시작일
- 종료일: 하위 Task 중 가장 늦은 종료일
- 진행률: 완료된 Task 비율로 색상 채움

### 13.6 Feature 접기/펼치기

- 펼친 상태 (▼): 하위 Task들 모두 표시
- 접힌 상태 (▶): 집계 바만 표시

### 13.7 Task 바 색상

| 상태 | 색상 | 조건 |
|------|------|------|
| 진행 전 | 회색 | 시작일 > 오늘 |
| 진행 중 | 파란색 | 시작일 ≤ 오늘 ≤ 종료일 |
| 완료 | 초록색 | Done 블록에 위치 |
| 마감 임박 | 주황색 | 종료일이 오늘/내일 & 미완료 |
| 마감 초과 | 빨간색 | 종료일 < 오늘 & 미완료 |

### 13.8 주 네비게이션

- `[<]` : 이전 주로 이동
- `[>]` : 다음 주로 이동
- `[오늘]` : 오늘이 포함된 주로 이동
- `[이번주]` : 이번 주로 이동

### 13.9 Task 상세 팝오버

Task 바 클릭 시 Feature, 담당자, 기간, 상태, 체크리스트 진행률 표시

### 13.10 데이터 모델 확장

```
Task 엔티티 확장:
├── start_date (DATE)  ← 신규: 시작일
└── end_date (DATE)    ← 신규: 종료일
```

### 13.11 API 확장

| Method | Endpoint | 설명 |
|--------|----------|------|
| GET | `/boards/{id}/weekly` | 주간 스케줄 조회 |
| PUT | `/boards/{id}/tasks/{taskId}/dates` | Task 기간 수정 |

### 13.12 권한

| 기능 | Owner | Admin | Member | Viewer |
|------|:-----:|:-----:|:------:|:------:|
| 위클리 스케줄 조회 | O | O | O | O |
| Task 기간 조절/이동 | O | O | O | X |

---

## 변경 이력

| 버전 | 날짜 | 주요 변경 |
|------|------|----------|
| v3.0 | 2025-01 | 데일리 스케줄 시스템 추가 |
| v4.0 | 2026-01 | 스케줄 블록/시간 표시 모드, 타임블록 이동, 중복 감지, 통합 체크리스트 모달 |
| v4.1 | 2026-01 | 위클리 스케줄 시스템 (간트 차트) 추가 |

---

**문서 버전**: 4.1
**최종 수정**: 2026년 1월 12일
